---
interface Props {
  variant?: 'yellow' | 'turquoise' | 'magenta';
  stacked?: boolean;
  class?: string;
}

const {
  variant = 'yellow',
  stacked = false,
  class: className = ''
} = Astro.props;
---

<div
  class={`card card-${variant} ${stacked ? 'card-stacked' : ''} ${className}`}
>
  <slot />
</div>

<style>
  .card {
    position: relative;
    padding: var(--spacing-neo-lg);
    border: var(--border-neo-thick) solid var(--color-text-light);
    border-radius: 0.5rem;
    background: var(--color-bg-light);
    isolation: isolate; /* Create stacking context for pseudo-elements */
  }

  .dark .card {
    background: var(--color-bg-dark);
    border-color: var(--color-text-dark);
  }

  /* Hard offset shadows for light mode */
  .card-yellow {
    box-shadow: 6px 6px 0 var(--color-yellow);
  }

  .card-turquoise {
    box-shadow: 6px 6px 0 var(--color-turquoise);
  }

  .card-magenta {
    box-shadow: 6px 6px 0 var(--color-magenta);
  }

  /* Dark mode: shadows become glows */
  .dark .card-yellow {
    box-shadow: 0 0 24px oklch(0.80 0.16 95 / 0.5);
  }

  .dark .card-turquoise {
    box-shadow: 0 0 24px oklch(0.65 0.13 195 / 0.5);
  }

  .dark .card-magenta {
    box-shadow: 0 0 24px oklch(0.60 0.18 350 / 0.5);
  }

  /* Stacked effect: background layers via pseudo-elements */
  .card-stacked::before,
  .card-stacked::after {
    content: '';
    position: absolute;
    inset: -4px;
    border: var(--border-neo) solid var(--color-text-light);
    border-radius: 0.5rem;
    z-index: -1;
  }

  .card-stacked::before {
    transform: translate(-8px, -8px);
    opacity: 0.3;
  }

  .card-stacked::after {
    transform: translate(-4px, -4px);
    opacity: 0.6;
  }

  .dark .card-stacked::before,
  .dark .card-stacked::after {
    border-color: var(--color-text-dark);
  }
</style>

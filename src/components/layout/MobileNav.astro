---
// Mobile navigation with hamburger menu and slide-in panel
---

<!-- Hamburger button (mobile only) -->
<button
  id="menu-toggle"
  type="button"
  aria-label="Menu"
  aria-expanded="false"
  class="md:hidden relative z-50 w-11 h-11 flex items-center justify-center border-[3px] border-text-light dark:border-text-dark rounded focus:outline-none focus:shadow-[0_0_0_2px_var(--color-bg-light),0_0_0_6px_var(--color-text-light)] dark:focus:shadow-[0_0_0_2px_var(--color-bg-dark),0_0_0_6px_var(--color-text-dark)]"
>
  <!-- Hamburger icon (3 lines that animate to X) -->
  <div class="hamburger-icon relative w-6 h-5">
    <span class="hamburger-line absolute left-0 w-full h-[3px] bg-text-light dark:bg-text-dark transition-all duration-200" style="top: 0;"></span>
    <span class="hamburger-line absolute left-0 w-full h-[3px] bg-text-light dark:bg-text-dark transition-all duration-200" style="top: 50%; transform: translateY(-50%);"></span>
    <span class="hamburger-line absolute left-0 w-full h-[3px] bg-text-light dark:bg-text-dark transition-all duration-200" style="bottom: 0;"></span>
  </div>
</button>

<!-- Full-screen slide-in panel -->
<div
  id="mobile-menu"
  class="fixed inset-0 z-40 bg-bg-light dark:bg-bg-dark border-l-[3px] border-text-light dark:border-text-dark transform translate-x-full transition-transform duration-300 md:hidden"
>
  <div class="flex flex-col items-center justify-center h-full space-y-8">
    <!-- Navigation links -->
    <nav class="flex flex-col items-center space-y-6 text-2xl">
      <a href="/blog" class="font-heading font-bold text-text-light dark:text-text-dark hover:text-accent-yellow dark:hover:text-accent-yellow transition-colors">
        Blog
      </a>
      <a href="/projects" class="font-heading font-bold text-text-light dark:text-text-dark hover:text-accent-yellow dark:hover:text-accent-yellow transition-colors">
        Projects
      </a>
      <a href="/faq" class="font-heading font-bold text-text-light dark:text-text-dark hover:text-accent-yellow dark:hover:text-accent-yellow transition-colors">
        FAQ
      </a>
      <a href="/#contact" class="font-heading font-bold text-text-light dark:text-text-dark hover:text-accent-yellow dark:hover:text-accent-yellow transition-colors">
        Contact
      </a>

      <!-- Dark mode toggle -->
      <button
        id="mobile-theme-toggle"
        type="button"
        aria-label="Toggle dark mode"
        class="w-11 h-11 flex items-center justify-center rounded border-[3px] border-text-light dark:border-text-dark hover:bg-yellow dark:hover:bg-yellow transition-colors focus:outline-none focus:shadow-[0_0_0_2px_var(--color-bg-light),0_0_0_6px_var(--color-text-light)] dark:focus:shadow-[0_0_0_2px_var(--color-bg-dark),0_0_0_6px_var(--color-text-dark)]"
      >
        <!-- Sun icon (visible in dark mode) -->
        <svg class="w-5 h-5 hidden dark:block text-text-dark" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
        </svg>
        <!-- Moon icon (visible in light mode) -->
        <svg class="w-5 h-5 block dark:hidden text-text-light" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
        </svg>
      </button>
    </nav>
  </div>
</div>

<script>
  const toggle = document.getElementById('menu-toggle');
  const menu = document.getElementById('mobile-menu');
  const hamburgerIcon = toggle?.querySelector('.hamburger-icon');

  toggle?.addEventListener('click', () => {
    const isExpanded = toggle.getAttribute('aria-expanded') === 'true';
    toggle.setAttribute('aria-expanded', String(!isExpanded));
    menu?.classList.toggle('translate-x-full');
    menu?.classList.toggle('translate-x-0');

    // Animate hamburger to X
    if (hamburgerIcon) {
      if (!isExpanded) {
        // Open state - transform to X
        const lines = hamburgerIcon.querySelectorAll<HTMLSpanElement>('.hamburger-line');
        lines[0].style.top = '50%';
        lines[0].style.transform = 'translateY(-50%) rotate(45deg)';
        lines[1].style.opacity = '0';
        lines[2].style.bottom = 'auto';
        lines[2].style.top = '50%';
        lines[2].style.transform = 'translateY(-50%) rotate(-45deg)';
      } else {
        // Closed state - back to hamburger
        const lines = hamburgerIcon.querySelectorAll<HTMLSpanElement>('.hamburger-line');
        lines[0].style.top = '0';
        lines[0].style.transform = 'none';
        lines[1].style.opacity = '1';
        lines[2].style.bottom = '0';
        lines[2].style.top = 'auto';
        lines[2].style.transform = 'none';
      }
    }
  });

  // Close menu when clicking on a nav link
  const navLinks = menu?.querySelectorAll('nav a');
  navLinks?.forEach(link => {
    link.addEventListener('click', () => {
      toggle?.setAttribute('aria-expanded', 'false');
      menu?.classList.add('translate-x-full');
      menu?.classList.remove('translate-x-0');

      // Reset hamburger icon
      if (hamburgerIcon) {
        const lines = hamburgerIcon.querySelectorAll<HTMLSpanElement>('.hamburger-line');
        lines[0].style.top = '0';
        lines[0].style.transform = 'none';
        lines[1].style.opacity = '1';
        lines[2].style.bottom = '0';
        lines[2].style.top = 'auto';
        lines[2].style.transform = 'none';
      }
    });
  });

  // Mobile theme toggle
  const mobileThemeToggle = document.getElementById('mobile-theme-toggle');

  mobileThemeToggle?.addEventListener('click', () => {
    const html = document.documentElement;
    const isDark = html.classList.contains('dark');

    if (isDark) {
      html.classList.remove('dark');
      localStorage.theme = 'light';
    } else {
      html.classList.add('dark');
      localStorage.theme = 'dark';
    }
  });
</script>

---
interface Props {
  title: string;
  slug: string;
  thumbnail: string;
  category: string;
  categoryLabel: string;
  problem: string;
}

const { title, slug, thumbnail, categoryLabel, problem } = Astro.props;

// Truncate problem to 160 chars
const truncatedProblem = problem.length > 160
  ? problem.substring(0, 157) + '...'
  : problem;
---

<a
  href={`/projects/${slug}`}
  class="block group transition-all duration-300 hover:-translate-y-2 rounded-lg overflow-hidden border-[4px] border-text-light dark:border-text-dark shadow-[6px_6px_0_var(--color-yellow)] dark:shadow-[0_0_20px_color-mix(in_oklch,var(--color-yellow-dark)_75%,transparent)] hover:shadow-none bg-bg-light dark:bg-bg-dark focus:outline-none focus:shadow-[0_0_0_2px_var(--color-bg-light),0_0_0_6px_var(--color-text-light)] dark:focus:shadow-[0_0_0_2px_var(--color-bg-dark),0_0_0_6px_var(--color-text-dark)]"
>
  <!-- Image container with 16:9 aspect ratio -->
  <div class="relative w-full bg-text-muted-light/10 dark:bg-text-muted-dark/10 overflow-hidden" style="aspect-ratio: 16/9;">
    <!-- Placeholder background with subtle pattern -->
    <div class="absolute inset-0 flex items-center justify-center">
      <svg class="w-16 h-16 text-text-muted-light/30 dark:text-text-muted-dark/30" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
      </svg>
    </div>
  </div>

  <!-- Card content -->
  <div class="p-6">
    <!-- Category badge -->
    <div class="mb-3">
      <span class="inline-block px-3 py-1 text-sm font-bold rounded-full border-[3px] border-text-light dark:border-text-dark bg-yellow dark:bg-yellow-dark text-text-light">
        {categoryLabel}
      </span>
    </div>

    <!-- Title -->
    <h3 class="font-heading text-xl font-bold mb-3 group-hover:text-accent-yellow transition-colors">
      {title}
    </h3>

    <!-- Problem excerpt -->
    <p class="text-sm text-text-muted-light dark:text-text-muted-dark line-clamp-3 leading-relaxed">
      {truncatedProblem}
    </p>
  </div>
</a>

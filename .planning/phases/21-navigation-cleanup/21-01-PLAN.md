---
phase: 21-navigation-cleanup
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/layout/Header.astro
  - src/components/layout/MobileNav.astro
  - src/components/layout/Footer.astro
  - astro.config.mjs
  - src/pages/contact.astro
autonomous: true

must_haves:
  truths:
    - "User sees only Blog, Projects, FAQ, Contact links in header navigation"
    - "User clicking Contact in header smooth-scrolls to #contact section on homepage"
    - "User visiting /contact is redirected to /#contact"
    - "User sees no FAQ link in footer"
    - "Mobile navigation mirrors desktop exactly (Blog, Projects, FAQ, Contact)"
  artifacts:
    - path: "src/components/layout/Header.astro"
      provides: "Simplified desktop navigation"
      contains: "href=\"/#contact\""
    - path: "src/components/layout/MobileNav.astro"
      provides: "Simplified mobile navigation"
      contains: "href=\"/#contact\""
    - path: "src/components/layout/Footer.astro"
      provides: "Footer without FAQ link"
      not_contains: "Frequently Asked Questions"
    - path: "astro.config.mjs"
      provides: "Redirect configuration"
      contains: "'/contact': '/#contact'"
  key_links:
    - from: "Header.astro Contact link"
      to: "/#contact anchor"
      via: "href attribute"
      pattern: "href=\"/#contact\""
    - from: "astro.config.mjs redirect"
      to: "/#contact"
      via: "Astro redirects config"
      pattern: "'/contact'.*'/#contact'"
---

<objective>
Simplify site navigation by removing redundant homepage section links from header, implementing /contact to /#contact redirect, and removing FAQ link from footer.

Purpose: Cleaner navigation that directs users to distinct pages (Blog, Projects, FAQ) and the homepage contact form, reducing clutter and improving user flow.

Output:
- Updated Header.astro with 4 navigation links (Blog, Projects, FAQ, Contact)
- Updated MobileNav.astro mirroring desktop navigation
- Updated Footer.astro without FAQ link section
- Updated astro.config.mjs with /contact redirect
- Deleted /contact.astro (file-based routes take precedence over redirects)
</objective>

<execution_context>
@/Users/joel/.claude/get-shit-done/workflows/execute-plan.md
@/Users/joel/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Phase-specific context
@.planning/phases/21-navigation-cleanup/21-CONTEXT.md
@.planning/phases/21-navigation-cleanup/21-RESEARCH.md

# Files to modify
@src/components/layout/Header.astro
@src/components/layout/MobileNav.astro
@src/components/layout/Footer.astro
@astro.config.mjs
</context>

<tasks>

<task type="auto">
  <name>Task 1: Simplify Header and Mobile Navigation</name>
  <files>
    src/components/layout/Header.astro
    src/components/layout/MobileNav.astro
  </files>
  <action>
Update both navigation components to show only Blog, Projects, FAQ, and Contact links.

**Header.astro (lines 13-40):**
Replace the existing desktop navigation links with:
```astro
<a href="/blog" class="font-heading font-bold text-text-light dark:text-text-dark hover:text-accent-yellow dark:hover:text-accent-yellow transition-colors">
  Blog
</a>
<a href="/projects" class="font-heading font-bold text-text-light dark:text-text-dark hover:text-accent-yellow dark:hover:text-accent-yellow transition-colors">
  Projects
</a>
<a href="/faq" class="font-heading font-bold text-text-light dark:text-text-dark hover:text-accent-yellow dark:hover:text-accent-yellow transition-colors">
  FAQ
</a>
<a href="/#contact" class="font-heading font-bold text-text-light dark:text-text-dark hover:text-accent-yellow dark:hover:text-accent-yellow transition-colors">
  Contact
</a>
```

Remove these links entirely:
- Home (/)
- Solutions (/#solutions)
- Process (/#process)
- Tech (/#tech)
- About (/#about)

Keep the dark mode toggle button unchanged.

**MobileNav.astro (lines 28-55):**
Mirror the exact same changes in the mobile nav section. Replace the nav links with the same 4 links (Blog, Projects, FAQ, Contact with /#contact href). Keep the dark mode toggle button unchanged.

**Order:** Blog, Projects, FAQ, Contact (consistent with user expectation of content pages first, action last)
  </action>
  <verify>
Run `npm run build` and verify no errors. Check both files contain exactly 4 navigation links each. Grep for old links to confirm removal:
```bash
grep -E "(/#solutions|/#process|/#tech|/#about|href=\"/\")" src/components/layout/Header.astro src/components/layout/MobileNav.astro
```
Should return no results.
  </verify>
  <done>
Both Header.astro and MobileNav.astro contain exactly Blog, Projects, FAQ, Contact links. Contact link uses /#contact href. Home, Solutions, Process, Tech, About links are removed. Dark mode toggle preserved.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add Redirect and Remove Footer FAQ Link</name>
  <files>
    astro.config.mjs
    src/components/layout/Footer.astro
  </files>
  <action>
**astro.config.mjs:**
Add the /contact to /#contact redirect in the existing redirects block (after line 16):
```javascript
redirects: {
  '/portfolio': '/projects',
  '/portfolio/[slug]': '/projects/[slug]',
  '/contact': '/#contact',
},
```

This creates a meta refresh redirect in static builds. Hash anchors work because the redirect executes in the browser.

**Footer.astro:**
Remove the FAQ link section (lines 44-52):
```astro
<!-- DELETE THIS ENTIRE SECTION -->
<div class="mt-8 pt-8 border-t-[3px] border-text-light/20 dark:border-text-dark/20 text-center">
  <a
    href="/faq"
    class="font-heading font-bold text-text-light dark:text-text-dark hover:text-accent-yellow dark:hover:text-accent-yellow transition-colors text-lg"
  >
    Frequently Asked Questions &rarr;
  </a>
</div>
```

Keep the rest of the footer intact (copyright, Built with Astro, social links).
  </action>
  <verify>
Run `npm run build` and verify no errors. Check astro.config.mjs contains the redirect:
```bash
grep "'/contact'" astro.config.mjs
```
Check Footer.astro no longer contains FAQ link:
```bash
grep -i "frequently asked" src/components/layout/Footer.astro
```
Should return no results.
  </verify>
  <done>
astro.config.mjs contains '/contact': '/#contact' redirect. Footer.astro no longer contains FAQ link section. Social links and copyright preserved.
  </done>
</task>

<task type="auto">
  <name>Task 3: Delete Contact Page and Verify Redirect</name>
  <files>
    src/pages/contact.astro (DELETE)
  </files>
  <action>
**Delete the file:**
```bash
rm src/pages/contact.astro
```

This is required because Astro file-based routes take precedence over redirects. The redirect in astro.config.mjs will only work if /contact.astro does not exist.

**Verify the complete navigation flow:**
1. Start dev server: `npm run dev`
2. Visit http://localhost:4321 - verify header shows Blog, Projects, FAQ, Contact only
3. Click Contact in header - should smooth scroll to #contact section
4. Visit http://localhost:4321/contact directly - should redirect to /#contact
5. Open mobile nav (resize to mobile width or use devtools) - verify same 4 links
6. Check footer - FAQ link should be absent

**Note:** The redirect uses meta refresh, so there may be a brief flash. This is expected for static site hash redirects.
  </action>
  <verify>
Verify file is deleted:
```bash
ls src/pages/contact.astro 2>&1 | grep -q "No such file" && echo "PASS: contact.astro deleted"
```

Run full build and preview to test redirect:
```bash
npm run build && npm run preview
```
Then test http://localhost:4321/contact redirects to /#contact.

Run Astro check:
```bash
npm run astro check
```
Should pass with no errors.
  </verify>
  <done>
/contact.astro is deleted. Visiting /contact redirects to /#contact. Build completes successfully. No broken links or TypeScript errors.
  </done>
</task>

</tasks>

<verification>
## Phase Verification

After all tasks complete:

1. **NAV-01 Check:** Header shows only Blog, Projects, FAQ, Contact
   - Desktop: visible in header nav
   - Mobile: visible in hamburger menu

2. **NAV-02 Check:** /contact redirects to /#contact
   - Direct URL visit triggers redirect
   - Scroll position lands at contact section (accounting for sticky header)

3. **NAV-03 Check:** Footer has no FAQ link
   - Social links and copyright remain
   - FAQ link section removed

4. **Build Verification:**
   - `npm run build` passes
   - `npm run astro check` passes
   - No console errors in dev server

5. **Cross-page Verification:**
   - Contact link works from any page (Blog, Projects, FAQ pages)
   - Mobile nav closes after selecting Contact link
   - Smooth scroll respects prefers-reduced-motion (users who disabled animations get instant scroll)
</verification>

<success_criteria>
- [ ] Header contains exactly 4 links: Blog, Projects, FAQ, Contact
- [ ] Mobile nav contains exactly 4 links: Blog, Projects, FAQ, Contact
- [ ] Contact link in both navs uses /#contact href
- [ ] /contact URL redirects to /#contact
- [ ] Footer does not contain FAQ link
- [ ] /contact.astro file is deleted
- [ ] `npm run build` succeeds
- [ ] `npm run astro check` passes
- [ ] Clicking Contact smooth-scrolls to contact section with proper offset
</success_criteria>

<output>
After completion, create `.planning/phases/21-navigation-cleanup/21-01-SUMMARY.md`
</output>

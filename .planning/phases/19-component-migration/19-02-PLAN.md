---
phase: 19-component-migration
plan: 02
type: execute
wave: 2
depends_on: ["19-01"]
files_modified:
  - src/pages/contact.astro
autonomous: true

must_haves:
  truths:
    - "Contact form inputs use Input component with consistent focus states"
    - "Contact submit button uses Button component"
    - "Form validation and submission behavior unchanged"
    - "Loading spinner displays during form submission"
  artifacts:
    - path: "src/pages/contact.astro"
      provides: "Migrated contact form"
      contains: "import Input from"
  key_links:
    - from: "contact.astro"
      to: "Input component"
      via: "component import and usage"
      pattern: "<Input"
    - from: "contact.astro"
      to: "Button component"
      via: "component import and usage"
      pattern: "<Button"
---

<objective>
Migrate Contact page form elements from raw HTML to design system components.

Purpose: Contact page is the lead generation funnel endpoint with 4 HIGH severity findings (form inputs, submit button). Fixing this page has highest user impact.

Output: Contact page using Input and Button components with preserved validation behavior.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/AUDIT.md
@.planning/phases/19-component-migration/19-CONTEXT.md
@.planning/phases/19-component-migration/19-01-SUMMARY.md

@src/pages/contact.astro
@src/components/ui/Input.astro
@src/components/ui/Button.astro
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate Contact form inputs to Input component</name>
  <files>src/pages/contact.astro</files>
  <action>
Import Input component at top of frontmatter.

Replace raw HTML inputs with Input component:

1. Name field (lines 28-42):
```astro
<Input
  variant="yellow"
  label="Name"
  type="text"
  id="name"
  name="name"
  required
  minlength={2}
  autocomplete="name"
  placeholder="Your name"
/>
```
Remove the separate label and error span - Input component provides these. Add `required` asterisk to label text if Input component doesn't support it (check component).

2. Email field (lines 45-59):
```astro
<Input
  variant="yellow"
  label="Email"
  type="email"
  id="email"
  name="email"
  required
  autocomplete="email"
  placeholder="you@example.com"
/>
```

3. Project Type select (lines 62-78):
```astro
<Input
  as="select"
  variant="yellow"
  label="Project Type"
  id="project-type"
  name="project-type"
>
  <option value="">Select a project type (optional)</option>
  <option value="Web App">Web App</option>
  <option value="Automation">Automation</option>
  <option value="AI Development">AI Development</option>
  <option value="Other">Other</option>
</Input>
```

4. Message textarea (lines 81-94):
```astro
<Input
  as="textarea"
  variant="yellow"
  label="Message"
  id="message"
  name="message"
  required
  minlength={10}
  rows={6}
  placeholder="Tell me about your project..."
/>
```

Use variant="yellow" to match the neobrutalist theme. Keep existing IDs for JavaScript validation.
  </action>
  <verify>
Run `npm run dev` and visit http://localhost:4321/contact.
Verify all form fields render with Input component styling.
Tab through fields to verify focus states.
  </verify>
  <done>
All 4 contact form fields use Input component with consistent WCAG 2.4.13 focus states.
  </done>
</task>

<task type="auto">
  <name>Task 2: Migrate submit button and update validation script</name>
  <files>src/pages/contact.astro</files>
  <action>
Import Button component at top of frontmatter.

Replace raw HTML submit button (lines 103-111) with Button component:
```astro
<Button
  type="submit"
  variant="turquoise"
  size="lg"
  class="w-full"
>
  <span class="button-text">Send Message</span>
  <span class="loading-icon hidden">
    <Loader2 size={20} />
  </span>
</Button>
```

Update the JavaScript validation section to work with Input component's error handling:
- The Input component already provides aria-invalid and aria-describedby
- Modify the validationConfig to target the input elements within Input wrappers
- Keep existing showFieldError/clearFieldError functions but update selectors if needed

The validation script currently targets `document.getElementById('name')` etc. This should still work as Input component preserves the `id` attribute on the actual input element.

Verify the loading spinner animation still works - the CSS targets `.loading-icon svg` which should still match since Loader2 renders an `<svg>`.

Remove any custom focus styling in the `<style>` block that's now handled by Input component.
  </action>
  <verify>
Run `npm run dev` and visit http://localhost:4321/contact.
Test form submission:
1. Click submit without filling fields - validation errors appear
2. Fill fields and submit - loading spinner shows, button disabled
3. Check light and dark mode styling
  </verify>
  <done>
Submit button uses Button component. Form validation and loading states work correctly.
  </done>
</task>

<task type="auto">
  <name>Task 3: Clean up and verify dark mode</name>
  <files>src/pages/contact.astro</files>
  <action>
Remove obsolete CSS from the `<style>` block:
- Remove input:user-invalid/user-valid styles (Input component handles error states differently)
- Keep loading spinner animation (still needed)

Verify imports are clean:
- Only import BaseLayout, Input, Button, Loader2
- Remove any unused imports

Test in browser:
1. Light mode: yellow variant inputs with dark text/border
2. Dark mode: inputs should have proper dark mode styling from Input component
3. Toggle theme and verify no flash or broken states
  </action>
  <verify>
Run `npm run dev`, visit /contact, and toggle dark mode.
All form elements should maintain consistent styling in both modes.
Run `npm run astro check` to verify no TypeScript errors.
  </verify>
  <done>
Contact page fully migrated with clean code. Both light and dark mode verified working.
  </done>
</task>

</tasks>

<verification>
```bash
# Type check
npm run astro check

# Build succeeds
npm run build
```

Manual testing checklist:
- [ ] Name input has label, focus state, accepts text
- [ ] Email input validates email format
- [ ] Project Type select shows dropdown with options
- [ ] Message textarea is resizable and has focus state
- [ ] Submit button shows loading spinner on click
- [ ] Dark mode toggle doesn't break any styling
</verification>

<success_criteria>
- Zero raw `<input>`, `<select>`, `<textarea>` elements in contact.astro (all use Input component)
- Submit button is Button component with variant="turquoise"
- Form validation still catches empty required fields
- Loading state displays during form submission
- WCAG 2.4.13 focus states on all interactive elements
</success_criteria>

<output>
After completion, create `.planning/phases/19-component-migration/19-02-SUMMARY.md`
</output>

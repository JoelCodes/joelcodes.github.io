---
phase: 19-component-migration
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/ui/Button.astro
  - src/components/ui/Input.astro
autonomous: true

must_haves:
  truths:
    - "Button component supports outline variant for inactive filter states"
    - "Button component forwards onclick as string via spread props"
    - "Input component renders textarea elements with same styling"
    - "Input component renders select elements with same styling"
  artifacts:
    - path: "src/components/ui/Button.astro"
      provides: "outline variant styling"
      contains: "btn-outline"
    - path: "src/components/ui/Input.astro"
      provides: "textarea and select support"
      contains: "Tag ="
  key_links:
    - from: "Button.astro"
      to: "filter buttons on projects/blog"
      via: "outline variant + onclick forwarding"
      pattern: "btn-outline"
---

<objective>
Extend Button and Input components to support patterns needed for page migrations.

Purpose: Before migrating pages, components need props/variants that raw HTML currently provides. This prevents mid-migration component rewrites.

Output: Button with outline variant for inactive filters; Input supporting textarea and select elements.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/AUDIT.md
@.planning/phases/19-component-migration/19-CONTEXT.md

@src/components/ui/Button.astro
@src/components/ui/Input.astro
@src/pages/projects/index.astro
@src/pages/contact.astro
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add outline variant to Button component</name>
  <files>src/components/ui/Button.astro</files>
  <action>
Add "outline" to the variant union type: `'yellow' | 'turquoise' | 'magenta' | 'outline'`

Add outline variant CSS in the component's `<style>` block. The outline variant should:
- Light mode: transparent background, colored border matching text-light, dark text
- Dark mode: transparent background, colored border matching text-dark, light text
- On hover: subtle background tint (10% opacity of border color)
- Same focus ring treatment as other variants
- Use `btn-outline` class name following existing pattern

The outline variant represents INACTIVE filter state. When active, JS will swap to solid variant (yellow/turquoise).

Also ensure onclick prop passes through via `...rest` spread (already works, just verify).
  </action>
  <verify>
Run `npm run dev` and visit /design-system page.
Add a test Button to /src/pages/design-system.astro temporarily:
```astro
<Button variant="outline">Outline Test</Button>
```
Alternatively, use browser dev tools on any existing Button: change class from `btn-yellow` to `btn-outline` and verify styling applies.
Confirm: transparent background with visible border, hover shows subtle tint.
  </verify>
  <done>
Button component accepts variant="outline" and renders transparent button with border. onclick prop forwards correctly.
  </done>
</task>

<task type="auto">
  <name>Task 2: Extend Input component for textarea and select</name>
  <files>src/components/ui/Input.astro</files>
  <action>
Add `as` prop to Input component: `as?: 'input' | 'textarea' | 'select'` (default: 'input')

Update the component to:
1. Dynamically render the correct element based on `as` prop
2. For textarea: accept `rows` prop, apply same styling as input
3. For select: render `<slot />` as children (for `<option>` elements)
4. Maintain all existing Input styling (border, focus ring, variants)

The implementation pattern should be:
```astro
const Tag = as === 'textarea' ? 'textarea' : as === 'select' ? 'select' : 'input';

<Tag
  id={id}
  class={`input input-${variant} ${error ? 'input-error' : ''}`}
  ...
>
  {as === 'select' && <slot />}
</Tag>
```

Ensure textarea and select get the same:
- WCAG 2.4.13 double-ring focus state
- Variant accent color on focus
- Error state styling
  </action>
  <verify>
Run `npm run dev` and visit /design-system page.
Test manually:
- `<Input as="textarea" label="Message" rows={4} />` renders styled textarea
- `<Input as="select" label="Type"><option>Web App</option></Input>` renders styled select
  </verify>
  <done>
Input component renders input, textarea, or select based on `as` prop with consistent styling and focus states.
  </done>
</task>

</tasks>

<verification>
```bash
# Type check passes
npm run astro check

# Dev server starts without errors
npm run dev
```

Manual verification on /design-system:
- [ ] Button outline variant visible and styled correctly
- [ ] Input textarea variant works with label and focus states
- [ ] Input select variant works with options and focus states
</verification>

<success_criteria>
- Button.astro exports outline variant with transparent bg, border, hover tint
- Input.astro accepts as="textarea" and as="select" props
- All variants maintain WCAG 2.4.13 focus states
- Existing Button and Input usage unchanged (backward compatible)
</success_criteria>

<output>
After completion, create `.planning/phases/19-component-migration/19-01-SUMMARY.md`
</output>

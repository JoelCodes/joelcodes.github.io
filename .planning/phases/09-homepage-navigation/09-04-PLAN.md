---
phase: 09-homepage-navigation
plan: 04
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/layout/Header.astro
  - src/components/layout/MobileNav.astro
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Desktop nav shows anchor links to homepage sections"
    - "Mobile nav shows anchor links to homepage sections"
    - "Clicking section link scrolls smoothly to that section"
    - "Mobile menu shows only one close mechanism (animated hamburger)"
  artifacts:
    - path: "src/components/layout/Header.astro"
      provides: "Desktop navigation with section anchor links"
      contains: "href=\"/#solutions\""
    - path: "src/components/layout/MobileNav.astro"
      provides: "Mobile navigation with section anchors, single close button"
      contains: "href=\"/#solutions\""
  key_links:
    - from: "Header.astro nav links"
      to: "Homepage section IDs"
      via: "anchor hrefs with /#section format"
      pattern: "href=\"/#(solutions|process|tech|about|contact)\""
---

<objective>
Close UAT gaps from Phase 09 by adding section anchor links to navigation and fixing duplicate close button in mobile menu.

Purpose: Enable smooth-scroll navigation to homepage sections and eliminate confusing double-X UI in mobile nav
Output: Updated Header.astro and MobileNav.astro with section links and single close mechanism
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/09-homepage-navigation/09-UAT.md
@src/components/layout/Header.astro
@src/components/layout/MobileNav.astro
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add section anchor links to desktop and mobile navigation</name>
  <files>src/components/layout/Header.astro, src/components/layout/MobileNav.astro</files>
  <action>
Add anchor links to homepage sections in both desktop and mobile navigation.

In Header.astro desktop nav (lines 13-25):
- After "Home" link, add: Solutions (/#solutions), Process (/#process), Tech (/#tech), About (/#about)
- Keep Contact as /contact (it's a separate page)
- Use same styling classes as existing links

In MobileNav.astro nav section (lines 40-52):
- After "Home" link, add matching anchor links: Solutions, Process, Tech, About
- Keep Contact as /contact
- Use same styling classes as existing links

Anchor format: Use `/#section` format (not just `#section`) so links work from any page on the site, not just homepage.

Ordering: Home | Solutions | Process | Tech | About | Portfolio | Blog | Contact
(Section links first, then page links, then Contact as final CTA)
  </action>
  <verify>
Run `npm run dev` and visit http://localhost:4321. Desktop nav should show 8 links. Clicking "Solutions" should smooth-scroll to the Solutions section. Clicking "About" from /blog should navigate to homepage and scroll to About section.
  </verify>
  <done>Desktop and mobile nav include Solutions, Process, Tech, About anchor links that smooth-scroll to homepage sections from any page</done>
</task>

<task type="auto">
  <name>Task 2: Fix duplicate close button in mobile nav</name>
  <files>src/components/layout/MobileNav.astro</files>
  <action>
Remove the dedicated close button from inside the mobile menu panel. The hamburger-to-X animation already provides a close mechanism.

Remove lines 27-37 (the close button with id="menu-close").

Update the JavaScript:
- Remove the `const close = document.getElementById('menu-close');` line
- Remove the entire `close?.addEventListener('click', ...)` handler (lines 110-124)
- The hamburger toggle already handles open/close and resets its icon state

This leaves only the animated hamburger button (z-50) which transforms to an X when open, providing a single, clear close mechanism.
  </action>
  <verify>
Run `npm run dev` on mobile viewport (or Chrome DevTools mobile emulation). Open mobile menu - should see only one X button (the transformed hamburger in top-right). Clicking the X should close the menu and animate back to hamburger.
  </verify>
  <done>Mobile menu shows single close button (animated hamburger-to-X), no duplicate X inside panel</done>
</task>

</tasks>

<verification>
1. Desktop: All 8 nav links visible and properly styled
2. Desktop: Clicking section links triggers smooth scroll to correct section
3. Desktop: Section content not hidden behind sticky header (scroll-margin-top working)
4. Mobile: Hamburger opens slide-in panel with all nav links
5. Mobile: Only one X button visible when menu is open
6. Mobile: Clicking X closes menu and returns to hamburger icon
7. Cross-page: Clicking /#about from /blog navigates to homepage and scrolls to About
</verification>

<success_criteria>
- UAT Test 3 passes: Clicking navigation link smoothly scrolls to section
- UAT Test 5 passes: Mobile nav panel opens with single close button
- All existing navigation functionality preserved (dark mode toggle, page links)
</success_criteria>

<output>
After completion, create `.planning/phases/09-homepage-navigation/09-04-SUMMARY.md`
</output>

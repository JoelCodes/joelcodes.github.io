---
phase: 08-primitive-components
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/ui/Button.astro
  - src/components/ui/Card.astro
autonomous: true

must_haves:
  truths:
    - "Button visually lifts on hover (front layer moves up)"
    - "Button visually presses down on active/click (front layer moves down)"
    - "Card displays thick border (4px) around content"
    - "Card displays colored offset shadow (6px 6px)"
    - "Card with stacked prop shows layered 3D effect behind it"
    - "All components work in both light and dark modes"
  artifacts:
    - path: "src/components/ui/Button.astro"
      provides: "Neobrutalist button with layered pressed effect"
      min_lines: 80
    - path: "src/components/ui/Card.astro"
      provides: "Neobrutalist card with borders, shadows, optional stacking"
      min_lines: 60
  key_links:
    - from: "src/components/ui/Button.astro"
      to: "src/styles/global.css"
      via: "CSS custom properties"
      pattern: "var\\(--color-"
    - from: "src/components/ui/Card.astro"
      to: "src/styles/global.css"
      via: "CSS custom properties"
      pattern: "var\\(--border-neo"
---

<objective>
Create Button and Card primitive components with neobrutalist styling.

Purpose: Establish core UI primitives that all other components will compose from. Button provides interactive pressed effect. Card provides container with visual depth.

Output: Two Astro components in `/src/components/ui/` directory ready for use in Phase 9+ compositions.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/DENSITY.md
@.planning/phases/08-primitive-components/08-RESEARCH.md
@src/styles/global.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Button component with layered pressed effect</name>
  <files>src/components/ui/Button.astro</files>
  <action>
Create the `/src/components/ui/` directory if it doesn't exist.

Create `Button.astro` implementing the layered button technique from 08-RESEARCH.md:

**Props interface:**
- `variant`: 'yellow' | 'turquoise' | 'magenta' (default: 'yellow')
- `size`: 'sm' | 'md' | 'lg' (default: 'md')
- `href`: optional string (renders as anchor if provided, button if not)
- `type`: 'button' | 'submit' | 'reset' (default: 'button', ignored if href)
- Extend HTMLAttributes for additional button/anchor attributes

**HTML structure (3-layer technique):**
1. Wrapper element (button or a tag)
2. Shadow layer (span.btn-shadow) - colored background that moves
3. Edge layer (span.btn-edge) - thick border outline
4. Front layer (span.btn-front) - visible button face with text slot

**CSS requirements:**
- Use design tokens from global.css (--color-yellow, --color-turquoise, --color-magenta, --border-neo-thick)
- Transform-based animation ONLY (not box-shadow animation) for performance
- Hover: front translateY(-6px), shadow translateY(4px)
- Active: front translateY(-2px), shadow translateY(1px)
- Focus-visible: 2px outline with 4px offset (WCAG 2.4.13 compliant)
- Dark mode: Use --color-*-dark variants, adjust border color

**Size classes:**
- sm: px-4 py-2 text-sm
- md: px-6 py-3 text-base
- lg: px-8 py-4 text-lg

Do NOT animate box-shadow directly - this causes performance issues on mobile. Use opacity on pseudo-element technique or transform-only approach from research.

Use scoped styles within the component (Astro's default behavior).
  </action>
  <verify>
Run `npm run build` - no errors.
Grep for "btn-shadow" in Button.astro to confirm layer structure.
Grep for "translateY" to confirm transform-based animation.
Grep for "focus-visible" to confirm accessibility focus state.
  </verify>
  <done>
Button.astro exists with 3-layer structure, transform-based hover/active states, size variants, and WCAG-compliant focus state.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Card component with borders, shadows, and stacking</name>
  <files>src/components/ui/Card.astro</files>
  <action>
Create `Card.astro` implementing the card pattern from 08-RESEARCH.md:

**Props interface:**
- `variant`: 'yellow' | 'turquoise' | 'magenta' (default: 'yellow')
- `stacked`: boolean (default: false) - enables 3D layered effect
- `class`: string (default: '') - for additional styling

**HTML structure:**
- Single div wrapper with class based on variant and stacked prop
- Default slot for content

**CSS requirements:**
- Use design tokens: --border-neo-thick (4px), --spacing-neo-lg (24px padding)
- Thick border: `border: var(--border-neo-thick) solid var(--color-text-light)`
- Hard offset shadow: `box-shadow: 6px 6px 0 var(--color-yellow)` (per variant)
- Dark mode: Convert shadow to glow using `0 0 24px oklch(...)`
- Add `isolation: isolate` to create stacking context (prevents z-index conflicts)

**Stacked effect (when stacked=true):**
- Use ::before and ::after pseudo-elements for background layers
- ::before: transform(-8px, -8px), opacity 0.3
- ::after: transform(-4px, -4px), opacity 0.6
- Both use same border style as main card
- z-index: -1 on pseudo-elements

**Dark mode handling:**
- Border color: --color-text-dark
- Background: --color-bg-dark
- Shadow becomes glow with 50% opacity

Use scoped styles within the component.
  </action>
  <verify>
Run `npm run build` - no errors.
Grep for "card-stacked" in Card.astro to confirm stacked variant.
Grep for "::before" and "::after" to confirm pseudo-element layers.
Grep for "isolation: isolate" to confirm stacking context.
  </verify>
  <done>
Card.astro exists with thick borders, colored offset shadows, optional stacked effect via pseudo-elements, and proper dark mode adaptation.
  </done>
</task>

</tasks>

<verification>
After both tasks complete:
1. Run `npm run build` to verify no compilation errors
2. Verify `/src/components/ui/` directory exists with Button.astro and Card.astro
3. Grep Button.astro for: btn-shadow, btn-edge, btn-front, translateY, focus-visible
4. Grep Card.astro for: card-stacked, ::before, ::after, isolation
5. Confirm no box-shadow animation (no `transition.*box-shadow` patterns)
</verification>

<success_criteria>
- Button.astro renders 3-layer structure (shadow, edge, front)
- Button hover lifts front layer up, active presses down
- Button works as both `<button>` and `<a>` tag depending on href prop
- Card.astro renders with 4px border and 6px offset shadow
- Card stacked prop shows 2 background layers via pseudo-elements
- Both components use design tokens from global.css
- Both components support yellow, turquoise, magenta variants
- Both components work in light and dark modes
- No box-shadow animation (transform-only for performance)
</success_criteria>

<output>
After completion, create `.planning/phases/08-primitive-components/08-01-SUMMARY.md`
</output>

---
phase: 08-primitive-components
plan: 02
type: execute
wave: 2
depends_on: ["08-01"]
files_modified:
  - src/components/ui/Input.astro
  - src/pages/component-demo.astro
autonomous: false

must_haves:
  truths:
    - "Input shows clear focus ring when tabbed to via keyboard"
    - "Input focus ring has at least 3:1 contrast ratio (WCAG 2.4.13)"
    - "Input focus ring is at least 2px thick"
    - "Input forwards HTML validation attributes (required, pattern, etc.)"
    - "Input displays error state with red border and error message"
    - "All three primitive components (Button, Card, Input) visible on demo page"
    - "Dark mode toggle changes component appearance correctly"
  artifacts:
    - path: "src/components/ui/Input.astro"
      provides: "Neobrutalist input with WCAG-compliant focus states"
      min_lines: 60
    - path: "src/pages/component-demo.astro"
      provides: "Demo page showing all primitives"
      min_lines: 40
  key_links:
    - from: "src/components/ui/Input.astro"
      to: "src/styles/global.css"
      via: "CSS custom properties"
      pattern: "var\\(--font-body"
    - from: "src/pages/component-demo.astro"
      to: "src/components/ui/Button.astro"
      via: "component import"
      pattern: "import Button from"
    - from: "src/pages/component-demo.astro"
      to: "src/components/ui/Card.astro"
      via: "component import"
      pattern: "import Card from"
    - from: "src/pages/component-demo.astro"
      to: "src/components/ui/Input.astro"
      via: "component import"
      pattern: "import Input from"
---

<objective>
Create Input component with accessible focus states and build demo page for visual verification.

Purpose: Complete the primitive component set with form input. Demo page enables visual verification of all primitives in light/dark modes before use in Phase 9+.

Output: Input.astro component and component-demo.astro page for visual verification checkpoint.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/DENSITY.md
@.planning/phases/08-primitive-components/08-RESEARCH.md
@.planning/phases/08-primitive-components/08-01-SUMMARY.md
@src/styles/global.css
@src/components/ui/Button.astro
@src/components/ui/Card.astro
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Input component with WCAG-compliant focus states</name>
  <files>src/components/ui/Input.astro</files>
  <action>
Create `Input.astro` implementing the input pattern from 08-RESEARCH.md:

**Props interface:**
- `variant`: 'yellow' | 'turquoise' | 'magenta' (default: 'yellow')
- `label`: optional string - displays label above input
- `error`: optional string - displays error message below input
- `id`: optional string - auto-generated if not provided
- Extend HTMLAttributes<'input'> using astro/types to forward all native attributes

**HTML structure:**
- Wrapper div for label + input + error
- Optional label element linked via htmlFor
- Native input element with all attributes spread
- Optional error paragraph with aria-describedby linkage

**Critical: HTML attribute forwarding:**
```astro
---
import type { HTMLAttributes } from 'astro/types';

interface Props extends Omit<HTMLAttributes<'input'>, 'class'> {
  variant?: 'yellow' | 'turquoise' | 'magenta';
  label?: string;
  error?: string;
}

const { variant = 'yellow', label, error, id, class: className, ...rest } = Astro.props;
---

<input {...rest} />
```
This ensures required, pattern, minlength, maxlength, type, etc. all work.

**CSS requirements:**
- Use design tokens: --font-body, --text-base, --border-neo (3px)
- Base border: `border: var(--border-neo) solid var(--color-text-light)`
- Padding: 0.75rem 1rem
- Border radius: 0.25rem

**Focus state (WCAG 2.4.13 compliant):**
- Use :focus-visible (not :focus) for keyboard-only indication
- Double ring technique:
  - Inner ring: 2px background color (creates gap)
  - Outer ring: 4px text color (actual indicator)
- Implementation: `box-shadow: 0 0 0 2px var(--color-bg-light), 0 0 0 4px var(--color-text-light)`
- Variant accent: border-color changes to accent color on focus
- Result: 4px total ring width, black ring on white = 21:1 contrast

**Error state:**
- Border color: oklch(0.55 0.22 25) (accessible red)
- aria-invalid="true" on input
- aria-describedby links to error message paragraph
- Error text: same red color, --text-sm size

**Dark mode:**
- Border: --color-text-dark
- Background: --color-bg-dark
- Focus ring: adjust to use --color-bg-dark and --color-text-dark

**Label styling:**
- Font: --font-heading
- Weight: 600
- Size: --text-sm
- Margin-bottom: 0.5rem

Use scoped styles within the component.
  </action>
  <verify>
Run `npm run build` - no errors.
Grep for "focus-visible" in Input.astro.
Grep for "box-shadow: 0 0 0 2px" to confirm ring technique.
Grep for "aria-invalid" to confirm error state accessibility.
Grep for "...rest" or spread to confirm HTML attribute forwarding.
  </verify>
  <done>
Input.astro exists with WCAG 2.4.13 compliant focus ring (2px minimum, 3:1 contrast), error state handling, label support, and HTML attribute forwarding.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create component demo page</name>
  <files>src/pages/component-demo.astro</files>
  <action>
Create a demo page at `/component-demo` that showcases all three primitives.

**Page structure:**
- Use BaseLayout from existing layouts
- Title: "Component Demo"
- Sections for each component type

**Button section:**
- All three variants (yellow, turquoise, magenta)
- All three sizes (sm, md, lg)
- Both button and anchor variations
- Instructions: "Hover to see lift effect, click to see press effect"

**Card section:**
- All three variants
- Both regular and stacked versions
- Each card contains sample content (heading + paragraph)

**Input section:**
- All three variants
- One with label
- One with error state
- One with placeholder
- Standard input types: text, email, required validation example

**Dark mode testing:**
- Include existing dark mode toggle (Header component)
- Or add inline toggle button for quick testing

**Layout:**
- Simple grid layout for variants
- Clear section headings
- Minimal styling (let components speak for themselves)

This page is temporary for development verification - it can be removed or hidden before production.
  </action>
  <verify>
Run `npm run dev` and navigate to http://localhost:4321/component-demo
Visually inspect: all components render without errors.
  </verify>
  <done>
component-demo.astro page exists and renders all Button, Card, and Input variants for visual inspection.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete primitive component set: Button (3-layer pressed effect), Card (thick borders, offset shadows, stacked option), Input (WCAG-compliant focus states)</what-built>
  <how-to-verify>
1. Start dev server: `npm run dev`
2. Navigate to http://localhost:4321/component-demo
3. **Button verification:**
   - Hover over each button - should lift up (front moves up, shadow moves down)
   - Click each button - should press down (front moves down, shadow shrinks)
   - Tab to buttons - should show clear focus ring (2px+ thick)
4. **Card verification:**
   - Each card should have thick border (4px) and colored offset shadow
   - Stacked cards should show layered effect behind them
5. **Input verification:**
   - Tab to each input - should show clear focus ring
   - Check input with error - should show red border and error message
6. **Dark mode:**
   - Toggle dark mode using site header
   - All components should adapt: shadows become glows, colors adjust
7. If any issues found, describe what looks wrong
  </how-to-verify>
  <resume-signal>Type "approved" if all components look correct, or describe specific issues to fix</resume-signal>
</task>

</tasks>

<verification>
After all tasks complete:
1. Input.astro exists with focus-visible, double ring technique, error handling
2. component-demo.astro imports and renders all three primitives
3. Build passes: `npm run build`
4. Human verifies visual appearance and dark mode behavior
</verification>

<success_criteria>
- Input.astro has WCAG 2.4.13 compliant focus ring (4px total, 21:1 contrast)
- Input forwards all HTML validation attributes (required, pattern, etc.)
- Input displays error state with accessible red and aria attributes
- component-demo.astro renders all Button, Card, Input variants
- Human approves visual appearance of all components
- Human approves dark mode adaptation
- All components use design tokens from global.css
</success_criteria>

<output>
After completion, create `.planning/phases/08-primitive-components/08-02-SUMMARY.md`
</output>

---
phase: 01-foundation-design-system
plan: 02
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - src/layouts/BaseLayout.astro
  - src/components/layout/Header.astro
  - src/components/layout/MobileNav.astro
  - src/components/layout/Footer.astro
autonomous: true

must_haves:
  truths:
    - "All pages share consistent header, footer, and meta tags"
    - "Dark mode toggles correctly based on system preference or user choice"
    - "Navigation is visible and functional on desktop (horizontal links)"
    - "Hamburger menu appears on mobile and opens slide-in panel"
    - "Menu icon animates to X when menu is open"
  artifacts:
    - path: "src/layouts/BaseLayout.astro"
      provides: "Page wrapper with head, body, dark mode support"
      contains: "global.css"
    - path: "src/components/layout/Header.astro"
      provides: "Site header with logo and desktop navigation"
      contains: "nav"
    - path: "src/components/layout/MobileNav.astro"
      provides: "Hamburger menu with slide-in panel"
      contains: "aria-expanded"
    - path: "src/components/layout/Footer.astro"
      provides: "Site footer with copyright"
      contains: "footer"
  key_links:
    - from: "src/layouts/BaseLayout.astro"
      to: "src/styles/global.css"
      via: "import statement"
      pattern: "import.*global\\.css"
    - from: "src/layouts/BaseLayout.astro"
      to: "Header.astro"
      via: "component import"
      pattern: "import Header"
    - from: "src/components/layout/Header.astro"
      to: "MobileNav.astro"
      via: "component import"
      pattern: "import MobileNav"
---

<objective>
Create the page layout system with header, footer, and mobile navigation.

Purpose: Establish the structural wrapper that all pages will use. The layout ensures consistency (header/footer on every page), handles dark mode correctly (no FOUC), and provides navigation that works on both desktop and mobile devices.

Output: BaseLayout component that wraps all pages, Header with desktop nav + mobile hamburger menu, Footer with copyright.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-design-system/01-RESEARCH.md
@.planning/phases/01-foundation-design-system/01-CONTEXT.md
@.planning/phases/01-foundation-design-system/01-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create BaseLayout with dark mode support</name>
  <files>
    src/layouts/BaseLayout.astro
  </files>
  <action>
Create src/layouts/BaseLayout.astro as the main page wrapper.

Requirements:
1. Import global.css to include Tailwind and design tokens
2. Accept title and description props for meta tags
3. Include Google Fonts (Poppins for headings, Inter for body) via preconnect + stylesheet link
4. CRITICAL: Add inline script in head that runs BEFORE body renders to prevent FOUC (Flash of Unstyled Content) with dark mode
5. Apply dark mode classes to body based on .dark class on html element
6. Include Header and Footer components (will be created in next tasks)
7. Use semantic HTML structure

Dark mode inline script (must be in head, with is:inline directive):
```javascript
document.documentElement.classList.toggle(
  "dark",
  localStorage.theme === "dark" ||
    (!("theme" in localStorage) &&
     window.matchMedia("(prefers-color-scheme: dark)").matches)
);
```

Body classes should use the design tokens:
- bg-bg-light dark:bg-bg-dark
- text-text-light dark:text-text-dark
- font-body (default body font)

Props interface:
```typescript
interface Props {
  title: string;
  description?: string;
}
```
  </action>
  <verify>
File exists at src/layouts/BaseLayout.astro. Contains: import of global.css, inline dark mode script in head, Google Fonts links, Header and Footer imports.
  </verify>
  <done>
BaseLayout wraps pages with consistent structure, dark mode works without flash, Google Fonts load correctly.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Header with desktop nav and mobile hamburger</name>
  <files>
    src/components/layout/Header.astro
    src/components/layout/MobileNav.astro
  </files>
  <action>
Create two components: Header.astro (main header) and MobileNav.astro (hamburger menu).

**Header.astro** requirements:
1. Fixed or sticky header at top of page
2. Contains site name/logo on left (text "Joel Shinness" for now)
3. Desktop navigation on right (hidden on mobile via md:flex, hidden by default)
4. Links: Home, About, Portfolio, Blog, Contact
5. Include MobileNav component (visible only on mobile)
6. Style with design tokens: bg-bg-light dark:bg-bg-dark, border-b for separation
7. Add dark mode toggle button (icon that switches between sun/moon)

**MobileNav.astro** requirements (per CONTEXT.md decisions):
1. Hamburger button visible only on mobile (md:hidden)
2. Button has minimum 44x44px touch target for accessibility
3. aria-label="Menu" and aria-expanded attribute that toggles
4. Three-line hamburger icon using spans with CSS
5. Full-screen slide-in panel from right when open
6. Panel contains nav links (same as desktop: Home, About, Portfolio, Blog, Contact)
7. Close button (X icon) in panel
8. Smooth slide animation (~200-300ms transition)
9. Hamburger lines animate/morph to X when open (rotate transforms)

Accessibility requirements:
- Use <button> elements (not divs) for interactive elements
- Include aria-label on hamburger button
- Toggle aria-expanded when menu opens/closes
- Focus management: when menu opens, focus should move to close button or first link

Script for menu toggle (use standard DOM, not framework):
```javascript
const toggle = document.getElementById('menu-toggle');
const menu = document.getElementById('mobile-menu');
const close = document.getElementById('menu-close');

toggle?.addEventListener('click', () => {
  const isExpanded = toggle.getAttribute('aria-expanded') === 'true';
  toggle.setAttribute('aria-expanded', String(!isExpanded));
  menu?.classList.toggle('translate-x-full');
  menu?.classList.toggle('translate-x-0');
});

close?.addEventListener('click', () => {
  toggle?.setAttribute('aria-expanded', 'false');
  menu?.classList.add('translate-x-full');
  menu?.classList.remove('translate-x-0');
});
```
  </action>
  <verify>
Files exist at src/components/layout/Header.astro and src/components/layout/MobileNav.astro. Header imports MobileNav. MobileNav has aria-expanded attribute and click handlers.
  </verify>
  <done>
Header shows site name and nav links on desktop. Hamburger menu appears on mobile and opens slide-in panel with smooth animation.
  </done>
</task>

<task type="auto">
  <name>Task 3: Create Footer component</name>
  <files>
    src/components/layout/Footer.astro
  </files>
  <action>
Create src/components/layout/Footer.astro with:

1. Semantic <footer> element
2. Copyright notice with current year (use JavaScript to compute dynamically)
3. Brief tagline or "Built with Astro" credit (optional)
4. Placeholder for social links (will be implemented in Phase 4 - CONT-04)
5. Style with design tokens: bg-bg-light dark:bg-bg-dark, border-t for separation
6. Padding and responsive layout (centered on mobile, could be multi-column on desktop)

Keep it simple for now - this is the foundation. Social links and additional content come in later phases.

Example structure:
```astro
<footer class="border-t border-text-light/10 dark:border-text-dark/10 py-8 mt-auto">
  <div class="container mx-auto px-4 text-center">
    <p class="text-text-muted-light dark:text-text-muted-dark">
      &copy; {new Date().getFullYear()} Joel Shinness. All rights reserved.
    </p>
  </div>
</footer>
```
  </action>
  <verify>
File exists at src/components/layout/Footer.astro. Contains semantic footer element with copyright.
  </verify>
  <done>
Footer component ready with copyright notice and styling consistent with design system.
  </done>
</task>

</tasks>

<verification>
After completing all tasks:
1. BaseLayout.astro imports global.css and includes dark mode script
2. Header.astro renders site name and navigation links
3. MobileNav.astro has hamburger button with aria attributes
4. Footer.astro has copyright with dynamic year
5. All components use design tokens from global.css
6. No Astro build errors when running npm run dev
</verification>

<success_criteria>
- BaseLayout provides consistent page structure with dark mode support
- Header shows desktop navigation (hidden on mobile)
- MobileNav hamburger appears on mobile only
- Hamburger button has proper accessibility attributes
- Footer displays copyright
- All styling uses design tokens (accent colors, fonts, backgrounds)
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-design-system/01-02-SUMMARY.md`
</output>

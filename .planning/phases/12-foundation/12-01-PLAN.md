---
phase: 12-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - src/components/layout/Footer.astro
  - src/pages/contact.astro
autonomous: true

must_haves:
  truths:
    - "Footer icons render at 20px size with correct color inheritance"
    - "Contact form loading spinner renders and animates correctly"
    - "Build output smaller than before migration"
  artifacts:
    - path: "package.json"
      provides: "@lucide/astro dependency"
      contains: "@lucide/astro"
    - path: "src/components/layout/Footer.astro"
      provides: "Astro component icons for Github and Linkedin"
      contains: "from '@lucide/astro'"
    - path: "src/pages/contact.astro"
      provides: "Astro component icon for Loader2"
      contains: "from '@lucide/astro'"
  key_links:
    - from: "Footer.astro"
      to: "@lucide/astro"
      via: "ESM import"
      pattern: "import.*Github.*Linkedin.*from '@lucide/astro'"
    - from: "contact.astro"
      to: "@lucide/astro"
      via: "ESM import"
      pattern: "import.*Loader2.*from '@lucide/astro'"
---

<objective>
Migrate icon library from lucide-static to @lucide/astro for tree-shaking and bundle size reduction.

Purpose: lucide-static bundles all 1000+ icons regardless of usage. @lucide/astro only includes imported icons, reducing bundle size by 200KB+.

Output: Working icon components in Footer and Contact page with smaller build output.
</objective>

<execution_context>
@/Users/joel/.claude/get-shit-done/workflows/execute-plan.md
@/Users/joel/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/components/layout/Footer.astro
@src/pages/contact.astro
</context>

<tasks>

<task type="auto">
  <name>Task 1: Swap npm packages</name>
  <files>package.json</files>
  <action>
    Run `npm uninstall lucide-static && npm install @lucide/astro` to swap the icon library.

    Before running, note the current build size for comparison:
    - Run `npm run build` first and record the dist folder size

    After installing:
    - Verify @lucide/astro appears in package.json dependencies
    - Verify lucide-static is removed from package.json
    - Run `npm run build` again and note the size reduction
  </action>
  <verify>
    `npm list lucide-static` returns empty/error (uninstalled)
    `npm list @lucide/astro` shows version installed
    Build completes successfully
  </verify>
  <done>
    Package swap complete: lucide-static removed, @lucide/astro installed
  </done>
</task>

<task type="auto">
  <name>Task 2: Update Footer.astro icon usage</name>
  <files>src/components/layout/Footer.astro</files>
  <action>
    Update the Footer component to use @lucide/astro Astro components:

    1. Change import from:
       `import { Github, Linkedin } from 'lucide-static';`
       To:
       `import { Github, Linkedin } from '@lucide/astro';`

    2. Replace Fragment wrappers with direct component usage:
       - Change `<Fragment set:html={Linkedin} />` to `<Linkedin size={20} />`
       - Change `<Fragment set:html={Github} />` to `<Github size={20} />`

    3. Remove the CSS `.social-link svg` sizing rules from the <style> block (no longer needed - size prop handles it).

    Per user decision: Use md (20px) size to match existing 1.25rem (20px) styling.
    Icons inherit color from parent via currentColor (default behavior, no change needed).
  </action>
  <verify>
    `npm run dev` starts without errors
    Visit http://localhost:4321 and verify footer icons appear
    Icons have correct size (20px) and color (muted gray, turquoise on hover)
    Dark mode toggle works (icons still visible)
  </verify>
  <done>
    Footer renders Github and Linkedin icons using @lucide/astro components at 20px size
  </done>
</task>

<task type="auto">
  <name>Task 3: Update contact.astro icon usage</name>
  <files>src/pages/contact.astro</files>
  <action>
    Update the Contact page to use @lucide/astro Astro component:

    1. Change import from:
       `import { Loader2 } from 'lucide-static';`
       To:
       `import { Loader2 } from '@lucide/astro';`

    2. Replace Fragment wrapper with direct component usage:
       - Change `<Fragment set:html={Loader2} />` to `<Loader2 size={20} />`

    3. Verify CSS animation still works:
       - The existing `.loading-icon svg` CSS targets the svg element
       - @lucide/astro renders as `<svg>` element, so animation should work unchanged
       - If animation breaks, adjust selector to target the new component structure

    Per user decision: Use md (20px) size to match existing 1.25rem styling.
  </action>
  <verify>
    Visit http://localhost:4321/contact
    Submit form without filling fields to trigger validation (button stays enabled)
    Click submit to see loading state - spinner icon should appear and animate
    Spinner has correct size (20px) and white color (inherited from button text)
  </verify>
  <done>
    Contact form loading spinner renders using @lucide/astro Loader2 component with animation
  </done>
</task>

</tasks>

<verification>
After all tasks complete:

1. **Build verification:**
   - `npm run build` completes successfully
   - Note bundle size reduction in commit message (expect 200KB+)

2. **Visual verification:**
   - Homepage: Footer icons visible and styled correctly
   - Contact page: Loading spinner animates correctly
   - Both light and dark mode work

3. **Accessibility check:**
   - Run existing axe tests: `npx playwright test tests/accessibility/`
   - All tests should pass (icons don't affect accessibility)
</verification>

<success_criteria>
- [ ] lucide-static removed from package.json
- [ ] @lucide/astro added to package.json
- [ ] Footer.astro uses `<Github size={20} />` and `<Linkedin size={20} />`
- [ ] contact.astro uses `<Loader2 size={20} />`
- [ ] No Fragment set:html usage for icons in codebase
- [ ] Build succeeds
- [ ] All existing tests pass
</success_criteria>

<output>
After completion, create `.planning/phases/12-foundation/12-01-SUMMARY.md`
</output>

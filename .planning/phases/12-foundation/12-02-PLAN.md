---
phase: 12-foundation
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/styles/global.css
  - src/pages/test-isometric.astro
autonomous: true

must_haves:
  truths:
    - "Isometric rotation utilities available in global.css"
    - "Isometric shadow utilities transform to glows in dark mode"
    - "Test page demonstrates all isometric utilities"
  artifacts:
    - path: "src/styles/global.css"
      provides: "Isometric CSS utilities"
      contains: "iso-container"
    - path: "src/styles/global.css"
      provides: "Isometric shadow/glow utilities"
      contains: "iso-shadow"
    - path: "src/pages/test-isometric.astro"
      provides: "Utility demonstration page"
      min_lines: 50
  key_links:
    - from: "test-isometric.astro"
      to: "global.css"
      via: "Tailwind utility classes"
      pattern: "class=.*iso-"
---

<objective>
Add isometric CSS utilities to global.css for 3D transform effects and shadow/glow patterns.

Purpose: Phases 13-15 will use these utilities for isometric illustrations. Building the foundation now prevents duplication and ensures consistent patterns.

Output: Complete set of isometric utilities with test page demonstrating all options.
</objective>

<execution_context>
@/Users/joel/.claude/get-shit-done/workflows/execute-plan.md
@/Users/joel/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/styles/global.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add isometric transform utilities</name>
  <files>src/styles/global.css</files>
  <action>
    Add isometric transform utilities to the `@layer utilities` section in global.css.

    Add after the existing shadow utilities (around line 139):

    ```css
    /* Isometric Transform Utilities */
    .iso-container {
      transform-style: preserve-3d;
    }

    /* Standard isometric rotation (45° on both axes) */
    .iso-rotate {
      transform: rotateX(45deg) rotateZ(45deg);
    }

    /* Subtle tilt (30° - less dramatic) */
    .iso-rotate-subtle {
      transform: rotateX(30deg) rotateZ(30deg);
    }

    /* Steep tilt (60° X, 45° Z - more dramatic) */
    .iso-rotate-steep {
      transform: rotateX(60deg) rotateZ(45deg);
    }

    /* Face positioning for multi-face isometric elements */
    .iso-face-front {
      transform: translateZ(20px);
    }

    .iso-face-top {
      transform: rotateX(90deg) translateZ(20px);
    }

    .iso-face-side {
      transform: rotateY(90deg) translateZ(20px);
    }

    /* Hover states */
    .iso-hover-lift {
      transition: transform 200ms ease;
    }

    .iso-hover-lift:hover {
      transform: translateY(-8px);
    }

    .iso-hover-glow {
      transition: box-shadow 200ms ease;
    }

    .iso-hover-glow:hover {
      box-shadow: 0 0 20px currentColor;
    }
    ```

    Note: These utilities use `currentColor` for hover glow, allowing color to be set via parent text color.
  </action>
  <verify>
    File saves without CSS syntax errors
    `npm run dev` starts successfully
    No console errors in browser
  </verify>
  <done>
    Isometric transform utilities added to global.css: iso-container, iso-rotate, iso-rotate-subtle, iso-rotate-steep, iso-face-*, iso-hover-lift, iso-hover-glow
  </done>
</task>

<task type="auto">
  <name>Task 2: Add isometric shadow/glow utilities</name>
  <files>src/styles/global.css</files>
  <action>
    Add isometric shadow and dark mode glow utilities to the `@layer utilities` section.

    Add after the isometric transform utilities:

    ```css
    /* Isometric Shadow Utilities (light mode: hard offset, dark mode: soft glow) */

    /* Small shadow (3px offset) */
    .iso-shadow-sm {
      box-shadow: 3px 3px 0 currentColor;
    }

    /* Standard shadow (5px offset) */
    .iso-shadow {
      box-shadow: 5px 5px 0 currentColor;
    }

    /* Large shadow (8px offset) */
    .iso-shadow-lg {
      box-shadow: 8px 8px 0 currentColor;
    }

    /* Dark mode: transform shadows to glows */
    .dark .iso-shadow-sm {
      box-shadow: 0 0 15px color-mix(in oklch, currentColor 20%, transparent);
    }

    .dark .iso-shadow {
      box-shadow: 0 0 20px color-mix(in oklch, currentColor 40%, transparent);
    }

    .dark .iso-shadow-lg {
      box-shadow: 0 0 30px color-mix(in oklch, currentColor 60%, transparent);
    }

    /* Explicit glow utilities (always glow, regardless of theme) */
    .iso-glow-subtle {
      box-shadow: 0 0 15px color-mix(in oklch, currentColor 20%, transparent);
    }

    .iso-glow {
      box-shadow: 0 0 20px color-mix(in oklch, currentColor 40%, transparent);
    }

    .iso-glow-strong {
      box-shadow: 0 0 30px color-mix(in oklch, currentColor 60%, transparent);
    }
    ```

    Per user decisions:
    - Medium glow intensity (40% opacity, 20px spread) as baseline
    - Glow color derived from currentColor (element's own color)
    - 3 intensity levels: subtle (20%/15px), default (40%/20px), strong (60%/30px)
    - OKLCH color space for perceptually uniform results
  </action>
  <verify>
    File saves without CSS syntax errors
    `npm run dev` starts successfully
    No console errors in browser
  </verify>
  <done>
    Isometric shadow/glow utilities added: iso-shadow-sm, iso-shadow, iso-shadow-lg with dark mode glow transformation, plus iso-glow-subtle, iso-glow, iso-glow-strong
  </done>
</task>

<task type="auto">
  <name>Task 3: Create test-isometric.astro demonstration page</name>
  <files>src/pages/test-isometric.astro</files>
  <action>
    Create a hidden test page that demonstrates all isometric utilities.

    This page is for development reference only - hidden from navigation and sitemap.

    Create `/src/pages/test-isometric.astro`:

    ```astro
    ---
    import BaseLayout from '../layouts/BaseLayout.astro';
    ---

    <BaseLayout
      title="Isometric Utilities Test | Dev Only"
      description="Development test page for isometric CSS utilities"
    >
      <section class="py-16 px-6">
        <div class="container max-w-4xl mx-auto">
          <h1 class="font-heading text-3xl font-bold mb-2 text-text-light dark:text-text-dark">
            Isometric Utilities Test
          </h1>
          <p class="text-text-muted-light dark:text-text-muted-dark mb-8">
            Development reference page. Not linked in navigation.
          </p>

          <!-- Rotation Presets -->
          <section class="mb-12">
            <h2 class="font-heading text-2xl font-bold mb-6 text-text-light dark:text-text-dark">
              Rotation Presets
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
              <!-- Standard -->
              <div>
                <p class="text-sm text-text-muted-light dark:text-text-muted-dark mb-2">.iso-rotate (45°)</p>
                <div class="iso-container perspective-1000">
                  <div class="iso-rotate w-24 h-24 bg-yellow border-3 border-text-light dark:border-text-dark"></div>
                </div>
              </div>
              <!-- Subtle -->
              <div>
                <p class="text-sm text-text-muted-light dark:text-text-muted-dark mb-2">.iso-rotate-subtle (30°)</p>
                <div class="iso-container perspective-1000">
                  <div class="iso-rotate-subtle w-24 h-24 bg-turquoise border-3 border-text-light dark:border-text-dark"></div>
                </div>
              </div>
              <!-- Steep -->
              <div>
                <p class="text-sm text-text-muted-light dark:text-text-muted-dark mb-2">.iso-rotate-steep (60°)</p>
                <div class="iso-container perspective-1000">
                  <div class="iso-rotate-steep w-24 h-24 bg-magenta border-3 border-text-light dark:border-text-dark"></div>
                </div>
              </div>
            </div>
          </section>

          <!-- Shadow Utilities (Light Mode) -->
          <section class="mb-12">
            <h2 class="font-heading text-2xl font-bold mb-6 text-text-light dark:text-text-dark">
              Shadow Utilities (Light Mode = Offset, Dark Mode = Glow)
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
              <!-- Small -->
              <div>
                <p class="text-sm text-text-muted-light dark:text-text-muted-dark mb-2">.iso-shadow-sm</p>
                <div class="text-yellow w-24 h-24 bg-bg-light dark:bg-bg-dark border-3 border-text-light dark:border-text-dark iso-shadow-sm"></div>
              </div>
              <!-- Standard -->
              <div>
                <p class="text-sm text-text-muted-light dark:text-text-muted-dark mb-2">.iso-shadow</p>
                <div class="text-turquoise w-24 h-24 bg-bg-light dark:bg-bg-dark border-3 border-text-light dark:border-text-dark iso-shadow"></div>
              </div>
              <!-- Large -->
              <div>
                <p class="text-sm text-text-muted-light dark:text-text-muted-dark mb-2">.iso-shadow-lg</p>
                <div class="text-magenta w-24 h-24 bg-bg-light dark:bg-bg-dark border-3 border-text-light dark:border-text-dark iso-shadow-lg"></div>
              </div>
            </div>
          </section>

          <!-- Glow Utilities -->
          <section class="mb-12">
            <h2 class="font-heading text-2xl font-bold mb-6 text-text-light dark:text-text-dark">
              Glow Utilities (Always Glow)
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
              <!-- Subtle -->
              <div>
                <p class="text-sm text-text-muted-light dark:text-text-muted-dark mb-2">.iso-glow-subtle</p>
                <div class="text-yellow w-24 h-24 bg-bg-light dark:bg-bg-dark border-3 border-text-light dark:border-text-dark iso-glow-subtle"></div>
              </div>
              <!-- Standard -->
              <div>
                <p class="text-sm text-text-muted-light dark:text-text-muted-dark mb-2">.iso-glow</p>
                <div class="text-turquoise w-24 h-24 bg-bg-light dark:bg-bg-dark border-3 border-text-light dark:border-text-dark iso-glow"></div>
              </div>
              <!-- Strong -->
              <div>
                <p class="text-sm text-text-muted-light dark:text-text-muted-dark mb-2">.iso-glow-strong</p>
                <div class="text-magenta w-24 h-24 bg-bg-light dark:bg-bg-dark border-3 border-text-light dark:border-text-dark iso-glow-strong"></div>
              </div>
            </div>
          </section>

          <!-- Hover States -->
          <section class="mb-12">
            <h2 class="font-heading text-2xl font-bold mb-6 text-text-light dark:text-text-dark">
              Hover States
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
              <!-- Lift -->
              <div>
                <p class="text-sm text-text-muted-light dark:text-text-muted-dark mb-2">.iso-hover-lift (hover to lift)</p>
                <div class="iso-hover-lift w-24 h-24 bg-yellow border-3 border-text-light dark:border-text-dark cursor-pointer"></div>
              </div>
              <!-- Glow -->
              <div>
                <p class="text-sm text-text-muted-light dark:text-text-muted-dark mb-2">.iso-hover-glow (hover to glow)</p>
                <div class="text-turquoise iso-hover-glow w-24 h-24 bg-bg-light dark:bg-bg-dark border-3 border-text-light dark:border-text-dark cursor-pointer"></div>
              </div>
            </div>
          </section>

          <!-- Combined Example -->
          <section class="mb-12">
            <h2 class="font-heading text-2xl font-bold mb-6 text-text-light dark:text-text-dark">
              Combined Example
            </h2>
            <p class="text-text-muted-light dark:text-text-muted-dark mb-4">
              .iso-container + .iso-rotate + .iso-shadow + .iso-hover-lift
            </p>
            <div class="iso-container perspective-1000">
              <div class="text-yellow iso-rotate iso-shadow iso-hover-lift w-32 h-32 bg-bg-light dark:bg-bg-dark border-3 border-text-light dark:border-text-dark cursor-pointer flex items-center justify-center">
                <span class="text-text-light dark:text-text-dark font-bold">Hover me</span>
              </div>
            </div>
          </section>

        </div>
      </section>
    </BaseLayout>

    <style>
      /* Add perspective for 3D transforms */
      .perspective-1000 {
        perspective: 1000px;
      }
    </style>
    ```

    Note: Page is accessible at /test-isometric but not linked in navigation.
  </action>
  <verify>
    Visit http://localhost:4321/test-isometric
    All rotation examples display correctly
    Shadow examples show offset in light mode
    Toggle to dark mode - shadows become glows
    Hover states (lift, glow) respond to mouse
    Combined example works correctly
  </verify>
  <done>
    Test page created at /test-isometric demonstrating all isometric utilities in light and dark mode
  </done>
</task>

</tasks>

<verification>
After all tasks complete:

1. **CSS verification:**
   - global.css contains all iso-* utilities
   - No CSS syntax errors
   - Build completes successfully

2. **Visual verification (test page):**
   - Rotation presets show different angles
   - Shadows visible in light mode (offset pattern)
   - Glows visible in dark mode (radial spread)
   - Hover states respond correctly

3. **Dark mode verification:**
   - Toggle theme on test page
   - iso-shadow classes transform to glows
   - Glow intensities visually distinct (subtle < default < strong)
   - Colors derive correctly from currentColor
</verification>

<success_criteria>
- [ ] global.css contains iso-container, iso-rotate, iso-rotate-subtle, iso-rotate-steep
- [ ] global.css contains iso-face-front, iso-face-top, iso-face-side
- [ ] global.css contains iso-hover-lift, iso-hover-glow
- [ ] global.css contains iso-shadow-sm, iso-shadow, iso-shadow-lg
- [ ] global.css contains iso-glow-subtle, iso-glow, iso-glow-strong
- [ ] Dark mode variants use color-mix with OKLCH
- [ ] test-isometric.astro created with all utility examples
- [ ] Test page accessible at /test-isometric
- [ ] Build succeeds
</success_criteria>

<output>
After completion, create `.planning/phases/12-foundation/12-02-SUMMARY.md`
</output>

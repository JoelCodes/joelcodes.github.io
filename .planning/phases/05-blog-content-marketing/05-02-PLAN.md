---
phase: 05-blog-content-marketing
plan: 02
type: execute
wave: 2
depends_on: ["05-01"]
files_modified:
  - src/pages/blog/index.astro
  - src/components/BlogCard.astro
  - src/styles/global.css
autonomous: true

must_haves:
  truths:
    - "User can view list of blog posts with title, date, excerpt, and tags"
    - "User can filter posts by clicking tag buttons"
    - "Blog cards show featured image and reading time"
    - "Filtered cards animate smoothly (matching portfolio pattern)"
  artifacts:
    - path: "src/pages/blog/index.astro"
      provides: "Blog listing page with filter buttons and card grid"
      contains: "getCollection"
    - path: "src/components/BlogCard.astro"
      provides: "Reusable blog card component with all required elements"
      contains: "data-tags"
  key_links:
    - from: "src/pages/blog/index.astro"
      to: "astro:content"
      via: "getCollection query"
      pattern: "getCollection\\('blog'"
    - from: "src/pages/blog/index.astro"
      to: "src/components/BlogCard.astro"
      via: "component import and rendering"
      pattern: "import BlogCard.*BlogCard"
---

<objective>
Create the blog listing page with card grid layout and tag filtering.

Purpose: Users need to browse all blog posts and filter by category. This matches the portfolio pattern established in Phase 3, maintaining visual consistency across the site.

Output: Blog listing page at /blog with filterable card grid showing all posts with title, date, excerpt, tags, reading time, and featured image.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/05-blog-content-marketing/05-CONTEXT.md
@.planning/phases/05-blog-content-marketing/05-RESEARCH.md
@.planning/phases/05-blog-content-marketing/05-01-SUMMARY.md
@src/pages/portfolio.astro
@src/styles/global.css
@src/layouts/BaseLayout.astro
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create BlogCard component</name>
  <files>src/components/BlogCard.astro</files>
  <action>
Create `src/components/BlogCard.astro` that displays:
- Featured image (16:9 aspect ratio with placeholder fallback)
- Title (linked to post)
- Publication date (formatted)
- Reading time ("X min read")
- Excerpt (first 160 chars or description)
- Tag pills (clickable, styled like portfolio category labels)

Props interface:
```typescript
interface Props {
  title: string;
  slug: string;
  pubDate: Date;
  description: string;
  featuredImage: string;
  tags: string[];
  readingTime: number;
}
```

Key implementation details:
- Use `data-tags` attribute on card root for filtering (comma-separated)
- Match portfolio card hover effects (translate-y-2, shadow-xl)
- Use `aspect-ratio: 16/9` for image container (consistent with portfolio)
- Include onerror fallback for missing images (SVG placeholder icon)
- Format date with toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })
- Display reading time as "{readingTime} min read"
- Tags render as small pills below excerpt

Styling should match portfolio cards:
- Rounded corners, overflow hidden
- Smooth transitions on hover
- Group hover effects for title color change
- Dark mode support using existing design tokens
  </action>
  <verify>
Import BlogCard in any test page and render with sample props.
Visual inspection shows all elements (image, title, date, tags, reading time, excerpt).
  </verify>
  <done>
BlogCard.astro exists with all required props and displays featured image, title, date, reading time, excerpt, and tags with portfolio-consistent styling.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create blog listing page with filtering</name>
  <files>src/pages/blog/index.astro, src/styles/global.css</files>
  <action>
Create `src/pages/blog/index.astro` with:

1. **Page header** - "Blog" title and subtitle about thought leadership/insights

2. **Filter buttons** - Horizontal row of tag pills
   - "All" button (default active, yellow accent)
   - One button per unique tag from all posts
   - Match portfolio filter button styling exactly
   - Active state: bg-accent-yellow, text-bg-dark
   - Inactive state: bg-text-muted-light/20, hover state with /30

3. **Card grid** - 2-3 columns responsive
   - Same grid classes as portfolio: `grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6`
   - Cards have class `blog-card` and `data-tags` attribute

4. **Load more button** (if more than 9 posts)
   - Initially show 9 posts, hide the rest
   - Load 6 more on each click
   - Hide button when all shown
   - Style: secondary button (teal or muted)

Query and process posts:
```typescript
import { getCollection } from 'astro:content';
import { readingTime } from 'reading-time-estimator';

// Get published posts, sorted newest first
const allPosts = await getCollection('blog', ({ data }) => {
  return import.meta.env.PROD ? !data.draft : true;
});

const sortedPosts = allPosts.sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);

// Get unique tags
const allTags = [...new Set(sortedPosts.flatMap(post => post.data.tags))];

// Calculate reading time for each post
const postsWithMeta = await Promise.all(sortedPosts.map(async (post) => {
  const { body } = post;
  const stats = readingTime(body || '', 265);
  return { ...post, readingTime: stats.minutes };
}));
```

Add filtering JavaScript (inline script):
- Same pattern as portfolio: filterSelection() and setActiveButton()
- Filter by checking if card's data-tags contains selected tag
- Use CSS class toggle for show/hide with animation

Add to global.css (reuse portfolio pattern):
```css
/* Blog card filtering animations - reuse portfolio pattern */
.blog-card {
  display: none;
  opacity: 0;
}

.blog-card.show {
  display: block;
  animation: fadeInScale 300ms ease-in-out forwards;
}
```
  </action>
  <verify>
Run `npm run dev` and visit http://localhost:4321/blog
- Page loads with header, filter buttons, and card grid
- Sample post appears in grid with all metadata
- Clicking filter buttons shows/hides cards
- "All" button shows all cards
  </verify>
  <done>
Blog listing page exists at /blog with:
- All posts displayed in responsive card grid
- Tag filter buttons (All + unique tags) with correct styling
- Filtering works with smooth animations
- Cards show title, date, excerpt, tags, reading time, featured image
  </done>
</task>

</tasks>

<verification>
1. Visit /blog - page loads without errors
2. Sample blog post appears in card grid
3. Card shows: title, date, reading time, excerpt, tags, featured image area
4. Filter buttons appear (All + tags from posts)
5. Clicking tag buttons filters the cards
6. Cards animate in/out smoothly
7. Dark mode works correctly
8. Responsive: 1 col on mobile, 2 on tablet, 3 on desktop
</verification>

<success_criteria>
- Blog listing page accessible at /blog
- Cards display all required metadata (title, date, excerpt, tags, reading time, featured image)
- Tag filtering works with vanilla JS
- Visual consistency with portfolio page (same card hover effects, filter button styles)
- Responsive grid layout
</success_criteria>

<output>
After completion, create `.planning/phases/05-blog-content-marketing/05-02-SUMMARY.md`
</output>

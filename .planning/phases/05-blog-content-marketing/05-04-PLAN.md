---
phase: 05-blog-content-marketing
plan: 04
type: execute
wave: 3
depends_on: ["05-02", "05-03"]
files_modified:
  - src/pages/blog/tags/[tag].astro
  - src/components/layout/Header.astro
autonomous: false

must_haves:
  truths:
    - "User can view dedicated tag page showing only posts with that tag"
    - "Tag pages are SEO-friendly with unique URLs (/blog/tags/automation)"
    - "Navigation includes link to Blog page"
    - "Complete blog feature works end-to-end (list, filter, read, tag pages)"
  artifacts:
    - path: "src/pages/blog/tags/[tag].astro"
      provides: "Tag-specific listing pages for SEO and shareability"
      contains: "getStaticPaths"
  key_links:
    - from: "src/pages/blog/tags/[tag].astro"
      to: "astro:content"
      via: "getCollection filtered by tag"
      pattern: "filter.*tags.*includes"
    - from: "src/components/layout/Header.astro"
      to: "/blog"
      via: "navigation link"
      pattern: "href=\"/blog\""
---

<objective>
Create dedicated tag pages for SEO and add navigation, then verify the complete blog feature.

Purpose: Tag pages provide SEO-friendly URLs for category-specific content (e.g., /blog/tags/ai). Navigation integration ensures users can discover the blog. Final verification confirms all BLOG requirements are met.

Output: Tag pages at /blog/tags/[tag], Blog link in site navigation, and human verification of complete feature.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/05-blog-content-marketing/05-CONTEXT.md
@.planning/phases/05-blog-content-marketing/05-02-SUMMARY.md
@.planning/phases/05-blog-content-marketing/05-03-SUMMARY.md
@src/components/layout/Header.astro
@src/pages/blog/index.astro
@src/components/BlogCard.astro
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create tag pages and add navigation</name>
  <files>src/pages/blog/tags/[tag].astro, src/components/layout/Header.astro</files>
  <action>
**Create tag pages at `src/pages/blog/tags/[tag].astro`:**

Use getStaticPaths to generate a page for each unique tag:

```typescript
import { getCollection } from 'astro:content';
import { readingTime } from 'reading-time-estimator';
import BaseLayout from '../../../layouts/BaseLayout.astro';
import BlogCard from '../../../components/BlogCard.astro';

export async function getStaticPaths() {
  const allPosts = await getCollection('blog', ({ data }) => {
    return import.meta.env.PROD ? !data.draft : true;
  });

  // Get unique tags
  const uniqueTags = [...new Set(allPosts.flatMap(post => post.data.tags))];

  return uniqueTags.map(tag => ({
    params: { tag },
    props: {
      tag,
      posts: allPosts
        .filter(post => post.data.tags.includes(tag))
        .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
    }
  }));
}
```

Page content:
- Title: "Posts tagged '{tag}'"
- Breadcrumb or back link to /blog
- Same card grid layout as main blog listing
- Reuse BlogCard component
- No filter buttons needed (already filtered by tag)

Calculate reading time for each post (same pattern as blog listing).

**Add Blog link to navigation:**

Update `src/components/layout/Header.astro`:
- Add "Blog" to the desktop nav links (next to Portfolio)
- Add "Blog" to the mobile nav menu
- Use same link styling as existing nav items
- Link to `/blog`

Order suggestion: Home, Portfolio, Blog, Contact
  </action>
  <verify>
Run `npm run dev`:
- Visit /blog/tags/automation (or whatever tags exist in sample post)
- Page shows only posts with that tag
- BlogCard components render correctly
- Navigation shows Blog link on desktop and mobile
- Blog link navigates to /blog
  </verify>
  <done>
Tag pages exist at /blog/tags/[tag] with filtered post grid.
Navigation header includes Blog link.
Mobile menu includes Blog link.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Human verification of complete blog feature</name>
  <what-built>
Complete blog system with:
- Blog listing page at /blog with card grid
- Tag filtering on listing page
- Individual post pages with MDX rendering
- Syntax-highlighted code blocks with copy button
- Sticky table of contents on desktop
- Dedicated tag pages at /blog/tags/[tag]
- Blog link in site navigation
  </what-built>
  <how-to-verify>
1. **Navigation** - Click "Blog" in header nav (desktop and mobile)
   - Should navigate to /blog

2. **Blog Listing** (/blog)
   - Cards display with title, date, excerpt, tags, featured image area
   - Reading time shows on cards
   - Filter buttons appear for each tag
   - Clicking a tag filters the cards (with animation)
   - "All" button shows all cards

3. **Individual Post** (click any blog card)
   - Post title, date, reading time in header
   - Content renders with proper typography
   - Code block has syntax highlighting (colored keywords)
   - Code block has copy button (hover to see)
   - TOC visible on desktop (right side), hidden on mobile
   - Scrolling highlights active TOC section
   - Content width is narrow for readability

4. **Tag Pages**
   - Click a tag on a card OR visit /blog/tags/[tag-name] directly
   - Page shows only posts with that tag
   - Page title indicates the tag filter

5. **Responsive Design**
   - Test mobile viewport (DevTools or resize)
   - Cards stack to 1 column
   - TOC hidden on post pages
   - Mobile menu includes Blog link

6. **Dark Mode**
   - Toggle dark mode
   - All blog elements style correctly
  </how-to-verify>
  <resume-signal>
Type "approved" if all checks pass, or describe any issues found.
  </resume-signal>
</task>

</tasks>

<verification>
Requirements verification:
- BLOG-01: Blog listing page shows all posts with title, date, and excerpt ✓
- BLOG-02: Individual blog post pages render MDX content correctly ✓
- BLOG-03: Blog posts can be tagged with categories ✓
- BLOG-04: Blog listing can be filtered by category tags ✓

Additional features verified:
- Syntax highlighted code blocks with copy button
- Sticky TOC with active section highlighting
- Reading time on cards and post header
- Dedicated tag pages for SEO
- Navigation integration
</verification>

<success_criteria>
- Tag pages generated for all unique tags
- Navigation includes Blog link in header and mobile menu
- Human verification confirms:
  - Blog listing displays correctly with filtering
  - Post pages render MDX with Expressive Code features
  - TOC works with scroll highlighting
  - Tag pages show filtered posts
  - Responsive design works on mobile
  - Dark mode styles correctly
</success_criteria>

<output>
After completion, create `.planning/phases/05-blog-content-marketing/05-04-SUMMARY.md`
</output>

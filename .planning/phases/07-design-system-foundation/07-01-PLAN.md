---
phase: 07-design-system-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/styles/global.css
  - src/layouts/BaseLayout.astro
autonomous: true

must_haves:
  truths:
    - "Site uses yellow/turquoise/magenta color palette visible on all pages"
    - "Colored shadows appear on elements (hard offset in light mode)"
    - "Dark mode converts shadows to colored glows"
    - "Typography uses Bricolage Grotesque for headings and DM Sans for body"
  artifacts:
    - path: "src/styles/global.css"
      provides: "Design tokens for colors, shadows, typography, borders, spacing"
      contains: "@theme"
    - path: "src/layouts/BaseLayout.astro"
      provides: "Google Fonts loading for Bricolage Grotesque and DM Sans"
      contains: "fonts.googleapis.com"
  key_links:
    - from: "src/styles/global.css"
      to: "src/layouts/BaseLayout.astro"
      via: "@import in CSS + font-family CSS variables"
      pattern: "--font-heading.*Bricolage"
---

<objective>
Define the complete neobrutalist design token system including OKLCH colors, colored shadows with dark mode glows, typography with variable fonts, and spacing scale.

Purpose: All Phase 8+ components will consume these tokens. Establishing them now ensures consistency and WCAG compliance.
Output: Updated global.css with @theme tokens, BaseLayout.astro with Google Fonts loading.
</objective>

<execution_context>
@/Users/joel/.claude/get-shit-done/workflows/execute-plan.md
@/Users/joel/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/07-design-system-foundation/07-CONTEXT.md
@.planning/phases/07-design-system-foundation/07-RESEARCH.md
@src/styles/global.css
@src/layouts/BaseLayout.astro
</context>

<tasks>

<task type="auto">
  <name>Task 1: Define OKLCH color tokens and shadow utilities</name>
  <files>src/styles/global.css</files>
  <action>
Replace the existing @theme block in global.css with the neobrutalist design tokens.

**Colors (OKLCH format for perceptual uniformity):**
- Yellow: oklch(0.85 0.18 95) — bright electric yellow
- Turquoise: oklch(0.70 0.15 195) — bright cyan-leaning
- Magenta: oklch(0.65 0.20 350) — berry/raspberry
- Dark mode variants: reduce L by 5%, reduce C by 0.02 (per RESEARCH.md)

**Preserve existing neutral colors** but convert to OKLCH format:
- bg-light: oklch(1.0 0 0) (white)
- bg-dark: oklch(0.15 0 0) (near-black)
- text-light: oklch(0.2 0 0)
- text-dark: oklch(0.95 0 0)
- text-muted-light: oklch(0.5 0 0)
- text-muted-dark: oklch(0.7 0 0)

**Borders:**
- --border-neo: 3px
- --border-neo-thick: 4px

**Spacing (4pt grid):**
- --spacing-neo-xs through --spacing-neo-2xl (8px to 64px)

**Typography (define font families):**
- --font-heading: 'Bricolage Grotesque', ui-sans-serif, system-ui, sans-serif
- --font-body: 'DM Sans', ui-sans-serif, system-ui, sans-serif
- Font weights: h1=800, h2=700, h3=600, h4=500, body=400
- Font sizes using 1.25 ratio scale (xs through 4xl)
- Line heights: tight=1.25, normal=1.5, relaxed=1.75

**Add shadow utilities in @layer utilities:**
- .shadow-neo-yellow, .shadow-neo-turquoise, .shadow-neo-magenta with 5px 5px 0 offset
- Dark mode variants that convert to 0 0 20px glow with 0.5 opacity
- Hover effects that reduce offset to 3px 3px and translate 2px

**Keep existing styles** below @theme:
- @custom-variant dark declaration
- Portfolio/blog card animations
- TOC styling
- Prose styling (update to use new font variables)

Update prose h2/h3 to use var(--font-heading) instead of hardcoded 'Poppins'.
  </action>
  <verify>
Run `npm run build` - should complete without CSS errors.
Grep for "@theme" in global.css - should find the new token block.
Grep for "shadow-neo" in global.css - should find all three color shadow utilities.
  </verify>
  <done>
global.css contains complete @theme block with OKLCH colors (yellow, turquoise, magenta + neutrals), border widths, spacing scale, typography tokens, and shadow utilities for light/dark modes.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update font loading in BaseLayout</name>
  <files>src/layouts/BaseLayout.astro</files>
  <action>
Replace the current font loading (Inter + Poppins) with the neobrutalist fonts (Bricolage Grotesque + DM Sans).

**Changes to make:**

1. Update the preload link href to:
   `https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,200..800&family=DM+Sans:opsz,wght@9..40,100..900&display=swap`

2. Update the stylesheet link (the one with media="print") to use the same URL.

3. Update the noscript fallback link to use the same URL.

4. Keep all the preconnect/dns-prefetch links unchanged (they're correct).

5. Update the body class to use the new font token:
   - Change `font-body` to `font-[family-name:var(--font-body)]` OR keep as `font-body` if that maps to the token correctly
   - Actually, Tailwind @theme should automatically create `font-body` from `--font-body`, so `font-body` should work. Verify after build.

**Why variable fonts:**
- Bricolage Grotesque supports opsz (12-96), wght (200-800) - quirky geometric forms
- DM Sans supports opsz (9-40), wght (100-900) - friendly, readable
- Single request per family, flexible weight control
  </action>
  <verify>
Run `npm run dev` and check browser DevTools:
1. Network tab should show fonts.googleapis.com loading Bricolage Grotesque and DM Sans
2. Computed styles on h1 should show font-family includes "Bricolage Grotesque"
3. Computed styles on body text should show font-family includes "DM Sans"
  </verify>
  <done>
BaseLayout.astro loads Bricolage Grotesque and DM Sans via Google Fonts API with variable font axes (opsz, wght) and display=swap.
  </done>
</task>

<task type="auto">
  <name>Task 3: Verify design tokens work correctly</name>
  <files>src/styles/global.css</files>
  <action>
Run the dev server and verify the design tokens are working:

1. Start dev server: `npm run dev`

2. Open browser to localhost:4321 and check:
   - Headings should display in Bricolage Grotesque (quirky geometric letterforms)
   - Body text should display in DM Sans (friendly geometric sans-serif)
   - Fonts should load without flash of unstyled text

3. Check dark mode toggle works:
   - Click dark mode toggle in header
   - Background should switch from white to near-black
   - Text should switch from dark to light

4. Run production build to verify no CSS errors:
   `npm run build`

5. Run Astro check:
   `npm run astro check`

If any errors occur, fix them in global.css and retry.

**Do NOT add any visual component changes** - this task is verification only. Component styling is Phase 8.
  </action>
  <verify>
- `npm run build` exits with code 0
- `npm run astro check` shows no errors
- Browser shows new fonts loaded in DevTools Network tab
  </verify>
  <done>
Design tokens verified working: build passes, fonts load correctly, dark mode toggle works, no TypeScript/Astro errors.
  </done>
</task>

</tasks>

<verification>
1. `npm run build` completes without errors
2. `npm run astro check` shows no TypeScript errors
3. global.css contains @theme with all design tokens
4. BaseLayout.astro loads Bricolage Grotesque and DM Sans fonts
5. Browser DevTools shows correct fonts in computed styles
6. Dark mode toggle still works (background/text swap)
</verification>

<success_criteria>
- Design tokens defined in global.css: colors (yellow, turquoise, magenta), shadows, borders, typography, spacing
- Shadow utilities created for light mode (hard offset) and dark mode (colored glow)
- Fonts loading from Google Fonts: Bricolage Grotesque + DM Sans with variable axes
- Build passes, no regressions in existing functionality
</success_criteria>

<output>
After completion, create `.planning/phases/07-design-system-foundation/07-01-SUMMARY.md`
</output>

---
phase: 07-design-system-foundation
plan: 02
type: execute
wave: 2
depends_on:
  - "07-01"
files_modified:
  - .planning/DENSITY.md
  - src/styles/global.css
autonomous: true

must_haves:
  truths:
    - "Density guidelines are documented with per-section targets"
    - "Developers can reference density rules when building components"
    - "Prose typography uses heading hierarchy with H1 ALL CAPS"
  artifacts:
    - path: ".planning/DENSITY.md"
      provides: "Density guidelines for neobrutalist design"
      contains: "3/10 overall"
    - path: "src/styles/global.css"
      provides: "Prose heading styles with weight hierarchy"
      contains: "text-transform: uppercase"
  key_links:
    - from: "src/styles/global.css"
      to: "prose heading elements"
      via: "CSS selectors using design tokens from 07-01"
      pattern: "prose h1.*font-weight.*var\\(--font-weight-h1\\)"
---

<objective>
Document density guidelines and finalize typography hierarchy for prose content (H1 ALL CAPS, descending weights).

Purpose: Density documentation ensures Phase 8+ components maintain the 3/10 constraint. Typography hierarchy completes the design system foundation.
Output: DENSITY.md reference document, updated prose styles in global.css.
</objective>

<execution_context>
@/Users/joel/.claude/get-shit-done/workflows/execute-plan.md
@/Users/joel/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/07-design-system-foundation/07-CONTEXT.md
@.planning/phases/07-design-system-foundation/07-01-SUMMARY.md
@src/styles/global.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create density guidelines documentation</name>
  <files>.planning/DENSITY.md</files>
  <action>
Create a density guidelines document based on the decisions in 07-CONTEXT.md.

**Document structure (outline - write full content):**

1. **Overview section:**
   - Overall density target: 3/10 (distinctive but not overwhelming)
   - Explain why restraint matters for neobrutalist design

2. **Density Scale table:**
   - 10/10: Maximum (hero, primary CTAs)
   - 7/10: Strong (secondary CTAs, feature highlights)
   - 5/10: Moderate (nav active states, form inputs)
   - 3/10: Subtle (content sections, cards)
   - 2/10: Minimal (blog post body)
   - 0/10: None (pure content, long-form text)

3. **Per-Section Targets** (main reference section):
   - Hero Section (10/10): full shadows, thick borders, bold typography
   - Primary CTAs (10/10): colored background, thick border, shadow, hover effect
   - Content Sections (3/10): thin/no borders, minimal shadows, one accent per section
   - Cards (3/10): 3px border, optional shadow for interactive only
   - Blog Post Content (2/10): styled headings, clean body, link accents only
   - Form Inputs (5/10): 3px border, focus accent, no shadows
   - Navigation (3/10): accent color active state, no shadows

4. **Implementation Rules** (5 rules):
   - One accent per section
   - Shadows imply importance (reserve for interactive)
   - Borders everywhere, shadows selective
   - Whitespace is your friend
   - Test with real content

5. **Anti-Patterns** (what NOT to do):
   - Multiple accents in same group
   - Shadows on non-interactive elements
   - Thick borders + colored shadows + bright background (pick two)
   - Tight spacing with heavy styling
   - ALL CAPS on anything except H1

6. **Validation Checklist** (5 questions to ask when reviewing components)

7. **Footer** with phase reference and usage note
  </action>
  <verify>
File exists at .planning/DENSITY.md
File contains "3/10" text
File contains per-section targets (Hero, Content, Blog, etc.)
  </verify>
  <done>
DENSITY.md created with comprehensive density guidelines including scale definitions, per-section targets, implementation rules, anti-patterns, and validation checklist.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update prose typography with heading hierarchy</name>
  <files>src/styles/global.css</files>
  <action>
Update the prose styles in global.css to implement the locked typography decisions:
- H1: ALL CAPS, weight 800, largest size
- H2: normal case, weight 700
- H3: normal case, weight 600

**Changes to prose section:**

1. Add h1 styling (currently missing):
```css
.prose h1 {
  font-family: var(--font-heading);
  font-size: var(--text-4xl);
  font-weight: var(--font-weight-h1);
  text-transform: uppercase;
  letter-spacing: -0.02em;
  margin-top: 0;
  margin-bottom: 1.5rem;
  color: var(--color-text-light);
}

.dark .prose h1 {
  color: var(--color-text-dark);
}
```

2. Update h2 styling to use design tokens:
```css
.prose h2 {
  font-family: var(--font-heading);
  font-size: var(--text-3xl);
  font-weight: var(--font-weight-h2);
  margin-top: 2.5rem;
  margin-bottom: 1rem;
  color: var(--color-text-light);
}
```

3. Update h3 styling to use design tokens:
```css
.prose h3 {
  font-family: var(--font-heading);
  font-size: var(--text-2xl);
  font-weight: var(--font-weight-h3);
  margin-top: 2rem;
  margin-bottom: 0.75rem;
  color: var(--color-text-light);
}
```

4. Add h4 styling for completeness:
```css
.prose h4 {
  font-family: var(--font-heading);
  font-size: var(--text-xl);
  font-weight: var(--font-weight-h4);
  margin-top: 1.5rem;
  margin-bottom: 0.5rem;
  color: var(--color-text-light);
}

.dark .prose h4 {
  color: var(--color-text-dark);
}
```

**Keep existing prose styles** for p, ul, ol, li, a, blockquote, code, etc. Only update headings.
  </action>
  <verify>
Run `npm run build` - should complete without errors.
Grep for "text-transform: uppercase" in global.css - should find in h1 rule.
Grep for "font-weight-h1" in global.css - should find reference.
  </verify>
  <done>
Prose headings updated: H1 is ALL CAPS with 800 weight, H2-H4 have descending weights using design tokens. All headings use Bricolage Grotesque via --font-heading variable.
  </done>
</task>

<task type="auto">
  <name>Task 3: Final verification and build</name>
  <files>src/styles/global.css, .planning/DENSITY.md</files>
  <action>
Perform final verification of the complete design system foundation:

1. Run production build:
   `npm run build`

2. Run Astro TypeScript check:
   `npm run astro check`

3. Verify all design tokens are present by grepping global.css:
   - Colors: yellow, turquoise, magenta
   - Shadows: shadow-neo-yellow, shadow-neo-turquoise, shadow-neo-magenta
   - Typography: font-heading, font-body, font-weight-h1 through h4
   - Borders: border-neo, border-neo-thick
   - Spacing: spacing-neo-xs through 2xl

4. Verify DENSITY.md exists and has required content:
   - "3/10 overall" text
   - Per-section targets
   - Validation checklist

5. Start dev server and visually verify:
   `npm run dev`
   - Visit localhost:4321
   - Check headings use Bricolage Grotesque (geometric quirky font)
   - Check body uses DM Sans (friendly geometric)
   - Toggle dark mode - should still work
   - Check blog page if available - H1 should be ALL CAPS

If any issues found, fix them before completing.
  </action>
  <verify>
- `npm run build` exits 0
- `npm run astro check` shows no errors
- DENSITY.md contains all required sections
- Browser shows correct fonts and dark mode works
  </verify>
  <done>
Design system foundation complete: all tokens defined, density documented, prose typography using heading hierarchy, build passing, no regressions.
  </done>
</task>

</tasks>

<verification>
1. `.planning/DENSITY.md` exists with comprehensive density guidelines
2. `global.css` prose styles use design tokens for h1-h4
3. H1 has `text-transform: uppercase` style
4. `npm run build` completes successfully
5. `npm run astro check` shows no errors
6. Visual verification shows correct fonts in browser
</verification>

<success_criteria>
- DENSITY.md created with per-section targets (hero 10/10, content 3/10, blog 2/10)
- Prose h1-h4 use design token variables (--font-heading, --font-weight-h1, etc.)
- H1 is ALL CAPS via text-transform: uppercase
- All builds and checks pass
- No regressions in existing site functionality
</success_criteria>

<output>
After completion, create `.planning/phases/07-design-system-foundation/07-02-SUMMARY.md`
</output>
